{"ast":null,"code":"\"use strict\";\n\n(function (factory) {\n  // AMD\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery', './jquery.enjoyhint.js', 'jquery.scrollto'], factory);\n  } // CommonJS\n  else if (typeof require === 'function' && typeof exports === 'object') {\n      module.exports = factory(require('jquery'), require('./jquery.enjoyhint.js'), require('jquery.scrollto'));\n    } // Global\n    else {\n        window.EnjoyHint = factory(jQuery);\n      }\n})(function ($) {\n  var EnjoyHint = function (configs) {\n    var $event_element;\n    var that = this;\n\n    var _options = configs || {};\n\n    var BTN_NEXT_TEXT = _options.btnNextText;\n    var BTN_SKIP_TEXT = _options.btnSkipText;\n    var SHAPE_BACKGROUND_COLOR = _options.backgroundColor || \"rgba(0,0,0,0.6)\";\n    var body = \"body\"; // TODO: Is it possible case when we need to define enjoyhint somewhere else?\n\n    var defaults = {\n      onStart: function () {},\n      onEnd: function () {},\n      onSkip: function () {},\n      onNext: function () {}\n    };\n    var options = $.extend(defaults, _options);\n    var data = [];\n    var current_step = 0;\n    var $body = $(body);\n    /********************* PRIVATE METHODS ***************************************/\n\n    var init = function () {\n      if ($(\".enjoyhint\")) {\n        $(\".enjoyhint\").remove();\n      }\n\n      $body.css({\n        overflow: \"hidden\"\n      });\n      $(document).on(\"touchmove\", lockTouch);\n      $body.enjoyhint({\n        onNextClick: function () {\n          nextStep();\n        },\n        onPrevClick: function () {\n          prevStep();\n        },\n        onSkipClick: function () {\n          options.onSkip();\n          skipAll();\n        },\n        fill: SHAPE_BACKGROUND_COLOR\n      });\n    };\n\n    var lockTouch = function (e) {\n      e.preventDefault();\n    };\n\n    var destroyEnjoy = function () {\n      $(\".enjoyhint\").remove();\n      $body.css({\n        overflow: \"auto\"\n      });\n      $(document).off(\"touchmove\", lockTouch);\n    };\n\n    that.clear = function () {\n      var $nextBtn = $(\".enjoyhint_next_btn\");\n      var $skipBtn = $(\".enjoyhint_skip_btn\");\n      $nextBtn.removeClass(that.nextUserClass);\n      $nextBtn.text(BTN_NEXT_TEXT);\n      $skipBtn.removeClass(that.skipUserClass);\n      $skipBtn.text(BTN_SKIP_TEXT);\n    };\n\n    function hideCurrentHint() {\n      $body.enjoyhint(\"render_circle\", []);\n      $(\"#enjoyhint_label\").remove();\n      $(\"#enjoyhint_arrpw_line\").remove();\n      $body.enjoyhint(\"hide_prev\");\n      $body.enjoyhint(\"hide_next\");\n      $body.enjoyhint(\"hide_skip\");\n    }\n\n    ;\n\n    var stepAction = function () {\n      if (!(data && data[current_step])) {\n        $body.enjoyhint(\"hide\");\n        options.onEnd();\n        destroyEnjoy();\n        return;\n      }\n\n      options.onNext();\n      var $enjoyhint = $(\".enjoyhint\");\n      $enjoyhint.removeClass(\"enjoyhint-step-\" + current_step);\n      $enjoyhint.removeClass(\"enjoyhint-step-\" + (current_step + 1));\n      $enjoyhint.removeClass(\"enjoyhint-step-\" + (current_step + 2));\n      $enjoyhint.addClass(\"enjoyhint-step-\" + (current_step + 1));\n      var step_data = data[current_step];\n      var scrollSpeed = step_data.scrollAnimationSpeed;\n\n      if (step_data.onBeforeStart && typeof step_data.onBeforeStart === \"function\") {\n        step_data.onBeforeStart();\n      }\n\n      var timeout = step_data.timeout || 0;\n      setTimeout(function () {\n        if (!step_data.selector) {\n          for (var prop in step_data) {\n            if (step_data.hasOwnProperty(prop) && prop.split(\" \")[1]) {\n              step_data.selector = prop.split(\" \")[1];\n              step_data.event = prop.split(\" \")[0];\n\n              if (prop.split(\" \")[0] == \"next\" || prop.split(\" \")[0] == \"auto\" || prop.split(\" \")[0] == \"custom\") {\n                step_data.event_type = prop.split(\" \")[0];\n              }\n\n              step_data.description = step_data[prop];\n            }\n          }\n        }\n\n        setTimeout(function () {\n          that.clear();\n        }, 250);\n        var isHintInViewport = $(step_data.selector).get(0).getBoundingClientRect();\n\n        if (isHintInViewport.top < 0 || isHintInViewport.bottom > (window.innerHeight || document.documentElement.clientHeight)) {\n          hideCurrentHint();\n          $(document.body).scrollTo(step_data.selector, step_data.scrollAnimationSpeed || 250, {\n            offset: -200\n          });\n        } else {\n          // if previous button has been clicked and element are in viewport to prevent custom step scrollAnimationSpeed set scrollSpeed to default\n          scrollSpeed = 250;\n        }\n\n        setTimeout(function () {\n          var $element = $(step_data.selector);\n          var event = makeEventName(step_data.event);\n          $body.enjoyhint(\"show\");\n          $event_element = $element;\n\n          if (step_data.event_selector) {\n            $event_element = $(step_data.event_selector);\n          }\n\n          $event_element.off(event);\n          $element.off(\"keydown\");\n\n          if (!step_data.event_type && step_data.event == \"key\") {\n            $element.keydown(function (event) {\n              if (event.which == step_data.keyCode) {\n                current_step++;\n                stepAction();\n              }\n            });\n          }\n\n          if (step_data.showNext !== true) {\n            $body.enjoyhint(\"hide_next\");\n          }\n\n          $body.enjoyhint(\"hide_prev\");\n\n          if (current_step !== 0) {\n            $body.enjoyhint(\"show_prev\");\n          }\n\n          if (step_data.showPrev == false) {\n            $body.enjoyhint(\"hide_prev\");\n          }\n\n          if (step_data.showSkip == false) {\n            $body.enjoyhint(\"hide_skip\");\n          } else {\n            $body.enjoyhint(\"show_skip\");\n          }\n\n          if (step_data.nextButton) {\n            var $nextBtn = $(\".enjoyhint_next_btn\");\n            $nextBtn.addClass(step_data.nextButton.className || \"\");\n            $nextBtn.text(step_data.nextButton.text || \"Next\");\n            that.nextUserClass = step_data.nextButton.className;\n          }\n\n          if (step_data.skipButton) {\n            var $skipBtn = $(\".enjoyhint_skip_btn\");\n            $skipBtn.addClass(step_data.skipButton.className || \"\");\n            $skipBtn.text(step_data.skipButton.text || \"Skip\");\n            that.skipUserClass = step_data.skipButton.className;\n          }\n\n          if (step_data.event_type) {\n            switch (step_data.event_type) {\n              case \"auto\":\n                $element[step_data.event]();\n\n                switch (step_data.event) {\n                  case \"click\":\n                    break;\n                }\n\n                current_step++;\n                stepAction();\n                return;\n\n              case \"custom\":\n                on(step_data.event, function () {\n                  current_step++;\n                  off(step_data.event);\n                  stepAction();\n                });\n                break;\n\n              case \"next\":\n                $body.enjoyhint(\"show_next\");\n                break;\n            }\n          } else {\n            $event_element.on(event, function (e) {\n              if (step_data.keyCode && e.keyCode != step_data.keyCode) {\n                return;\n              }\n\n              current_step++;\n              stepAction(); // clicked\n            });\n          }\n\n          var max_habarites = Math.max($element.outerWidth(), $element.outerHeight());\n          var radius = step_data.radius || Math.round(max_habarites / 2) + 5;\n          var offset = $element.offset();\n          var w = $element.outerWidth();\n          var h = $element.outerHeight();\n          var shape_margin = step_data.margin !== undefined ? step_data.margin : 10;\n          var coords = {\n            x: offset.left + Math.round(w / 2),\n            y: offset.top + Math.round(h / 2) - $(document).scrollTop()\n          };\n          var shape_data = {\n            enjoyHintElementSelector: step_data.selector,\n            center_x: coords.x,\n            center_y: coords.y,\n            text: step_data.description,\n            arrowColor: step_data.arrowColor,\n            top: step_data.top,\n            bottom: step_data.bottom,\n            left: step_data.left,\n            right: step_data.right,\n            margin: step_data.margin,\n            scroll: step_data.scroll\n          };\n\n          if (shape_data.center_x === 0 && shape_data.center_y === 0) {\n            $body.enjoyhint(\"hide\");\n            destroyEnjoy();\n            return console.log(\"Error: Element position couldn't be reached\");\n          }\n\n          if (step_data.shape && step_data.shape == \"circle\") {\n            shape_data.shape = \"circle\";\n            shape_data.radius = radius;\n          } else {\n            shape_data.radius = 0;\n            shape_data.width = w + shape_margin;\n            shape_data.height = h + shape_margin;\n          }\n\n          $body.enjoyhint(\"render_label_with_shape\", shape_data, that.stop);\n        }, scrollSpeed + 20 || 270);\n      }, timeout);\n    };\n\n    var nextStep = function () {\n      current_step++;\n      stepAction();\n    };\n\n    var prevStep = function () {\n      current_step--;\n      stepAction();\n    };\n\n    var skipAll = function () {\n      var step_data = data[current_step];\n      var $element = $(step_data.selector);\n      off(step_data.event);\n      $element.off(makeEventName(step_data.event));\n      destroyEnjoy();\n    };\n\n    var makeEventName = function (name, is_custom) {\n      return name + (is_custom ? \"custom\" : \"\") + \".enjoy_hint\";\n    };\n\n    var on = function (event_name, callback) {\n      $body.on(makeEventName(event_name, true), callback);\n    };\n\n    var off = function (event_name) {\n      $body.off(makeEventName(event_name, true));\n    };\n    /********************* PUBLIC METHODS ***************************************/\n\n\n    window.addEventListener(\"resize\", function () {\n      if ($event_element != null) {\n        $body.enjoyhint(\"redo_events_near_rect\", $event_element[0].getBoundingClientRect());\n      }\n    }, false);\n\n    that.stop = function () {\n      skipAll();\n    };\n\n    that.reRunScript = function (cs) {\n      current_step = cs;\n      stepAction();\n    };\n\n    that.runScript = function () {\n      current_step = 0;\n      options.onStart();\n      stepAction();\n    };\n\n    that.resumeScript = function () {\n      stepAction();\n    };\n\n    that.setCurrentStep = function (cs) {\n      current_step = cs;\n    };\n\n    that.getCurrentStep = function () {\n      return current_step;\n    };\n\n    that.trigger = function (event_name) {\n      switch (event_name) {\n        case \"next\":\n          nextStep();\n          break;\n\n        case \"skip\":\n          skipAll();\n          break;\n\n        default:\n          $body.trigger(makeEventName(event_name, true));\n      }\n    };\n\n    that.setScript = function (_data) {\n      if (!(_data instanceof Array) && _data.length < 1) {\n        throw new Error(\"Configurations list isn't correct.\");\n      }\n\n      data = _data;\n    }; //support deprecated API methods\n\n    /**\r\n     * Configure data list\r\n     */\n\n\n    that.set = function (_data) {\n      that.setScript(_data);\n    };\n\n    that.setSteps = function (_data) {\n      that.setScript(_data);\n    };\n\n    that.run = function () {\n      that.runScript();\n    };\n\n    that.resume = function () {\n      that.resumeScript();\n    };\n\n    init();\n  };\n\n  return EnjoyHint;\n});\n\nCanvasRenderingContext2D.prototype.roundRect = function (x, y, w, h, r) {\n  if (w < 2 * r) r = w / 2;\n  if (h < 2 * r) r = h / 2;\n  this.beginPath();\n  this.moveTo(x + r, y);\n  this.arcTo(x + w, y, x + w, y + h, r);\n  this.arcTo(x + w, y + h, x, y + h, r);\n  this.arcTo(x, y + h, x, y, r);\n  this.arcTo(x, y, x + w, y, r);\n  this.closePath();\n  return this;\n};\n\n(function (factory) {\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['jquery', 'kinetic'], factory);\n  } else if (typeof module !== 'undefined' && module.exports) {\n    // CommonJS\n    module.exports = factory(require('jquery'), require('kinetic'));\n  } else {\n    // Global\n    factory(jQuery, Kinetic);\n  }\n})(function ($, Kinetic) {\n  var that;\n  var originalLabelLeft, originalLabelTop;\n  var originalArrowLeft, originalArrowTop;\n  var originalCenterX, originalCenterY;\n  var originalSkipbuttonLeft, originalSkipbuttonTop;\n  var prevWindowWidth, prevWindowHeight;\n  var originalWidth = window.innerWidth,\n      originalHeight = window.innerHeight;\n  var methods = {\n    init: function (options) {\n      return this.each(function () {\n        var defaults = {\n          onNextClick: function () {},\n          onSkipClick: function () {},\n          onPrevClick: function () {},\n          animation_time: 800\n        };\n        this.enjoyhint_obj = {};\n        that = this.enjoyhint_obj;\n\n        that.resetComponentStuff = function () {\n          originalLabelLeft = null;\n          originalLabelTop = null;\n          originalArrowLeft = null;\n          originalArrowTop = null;\n          originalCenterX = null;\n          originalCenterY = null;\n          originalSkipbuttonLeft = null;\n          originalSkipbuttonTop = null;\n          prevWindowWidth = null;\n          prevWindowHeight = null;\n          originalWidth = window.innerWidth;\n          originalHeight = window.innerHeight;\n        };\n\n        var $that = $(this);\n        that.options = $.extend(defaults, options); //general classes\n\n        that.gcl = {\n          chooser: \"enjoyhint\"\n        }; // classes\n\n        that.cl = {\n          enjoy_hint: \"enjoyhint\",\n          hide: \"enjoyhint_hide\",\n          disable_events_element: \"enjoyhint_disable_events\",\n          btn: \"enjoyhint_btn\",\n          skip_btn: \"enjoyhint_skip_btn\",\n          close_btn: \"enjoyhint_close_btn\",\n          next_btn: \"enjoyhint_next_btn\",\n          previous_btn: \"enjoyhint_prev_btn\",\n          main_canvas: \"enjoyhint_canvas\",\n          main_svg: \"enjoyhint_svg\",\n          svg_wrapper: \"enjoyhint_svg_wrapper\",\n          svg_transparent: \"enjoyhint_svg_transparent\",\n          kinetic_container: \"kinetic_container\"\n        };\n\n        function makeSVG(tag, attrs) {\n          var el = document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n\n          for (var k in attrs) {\n            el.setAttribute(k, attrs[k]);\n          }\n\n          return el;\n        } // =======================================================================\n        // ========================---- enjoyhint ----==============================\n        // =======================================================================\n\n\n        that.canvas_size = {\n          w: $(window).width() * 1.4,\n          h: $(window).height() * 1.4\n        };\n        var canvas_id = \"enj_canvas\";\n        that.enjoyhint = $(\"<div>\", {\n          class: that.cl.enjoy_hint + \" \" + that.cl.svg_transparent\n        }).appendTo($that);\n        that.enjoyhint_svg_wrapper = $(\"<div>\", {\n          class: that.cl.svg_wrapper + \" \" + that.cl.svg_transparent\n        }).appendTo(that.enjoyhint);\n        that.$stage_container = $('<div id=\"' + that.cl.kinetic_container + '\">').appendTo(that.enjoyhint);\n        that.$canvas = $('<canvas id=\"' + canvas_id + '\" width=\"' + that.canvas_size.w + '\" height=\"' + that.canvas_size.h + '\" class=\"' + that.cl.main_canvas + '\">').appendTo(that.enjoyhint);\n        that.$svg = $('<svg width=\"' + that.canvas_size.w + '\" height=\"' + that.canvas_size.h + '\" class=\"' + that.cl.main_canvas + \" \" + that.cl.main_svg + '\">').appendTo(that.enjoyhint_svg_wrapper);\n        var defs = $(makeSVG(\"defs\"));\n        var marker = $(makeSVG(\"marker\", {\n          id: \"arrowMarker\",\n          viewBox: \"0 0 36 21\",\n          refX: \"21\",\n          refY: \"10\",\n          markerUnits: \"strokeWidth\",\n          orient: \"auto\",\n          markerWidth: \"16\",\n          markerHeight: \"12\"\n        }));\n        var polilyne = $(makeSVG(\"path\", {\n          style: \"fill:none; stroke:rgb(255,255,255); stroke-width:2\",\n          d: \"M0,0 c30,11 30,9 0,20\",\n          id: \"poliline\"\n        }));\n        defs.append(marker.append(polilyne)).appendTo(that.$svg);\n        that.kinetic_stage = new Kinetic.Stage({\n          container: that.cl.kinetic_container,\n          width: that.canvas_size.w,\n          height: that.canvas_size.h,\n          scaleX: 1\n        });\n        that.layer = new Kinetic.Layer();\n        that.rect = new Kinetic.Rect({\n          fill: options.fill,\n          width: that.canvas_size.w,\n          height: that.canvas_size.h\n        });\n        var $top_dis_events = $(\"<div>\", {\n          class: that.cl.disable_events_element\n        }).appendTo(that.enjoyhint);\n        var $bottom_dis_events = $top_dis_events.clone().appendTo(that.enjoyhint);\n        var $left_dis_events = $top_dis_events.clone().appendTo(that.enjoyhint);\n        var $right_dis_events = $top_dis_events.clone().appendTo(that.enjoyhint);\n\n        var stopPropagation = function (e) {\n          e.stopImmediatePropagation();\n        };\n\n        $(\"button\").focusout(stopPropagation);\n        $top_dis_events.click(stopPropagation);\n        $bottom_dis_events.click(stopPropagation);\n        $left_dis_events.click(stopPropagation);\n        $right_dis_events.click(stopPropagation);\n        that.$skip_btn = $(\"<div>\", {\n          class: that.cl.skip_btn\n        }).appendTo(that.enjoyhint).html(\"Skip\").click(function (e) {\n          that.hide();\n          that.options.onSkipClick();\n        });\n        that.$next_btn = $(\"<div>\", {\n          class: that.cl.next_btn\n        }).appendTo(that.enjoyhint).html(\"Next\").click(function (e) {\n          that.options.onNextClick();\n        });\n        that.$close_btn = $(\"<div>\", {\n          class: that.cl.close_btn\n        }).appendTo(that.enjoyhint).html(\"\").click(function (e) {\n          that.hide();\n          that.options.onSkipClick();\n        });\n        that.$prev_btn = $(\"<div>\", {\n          class: that.cl.previous_btn\n        }).appendTo(that.enjoyhint).html(\"Previous\").click(function (e) {\n          that.options.onPrevClick();\n        });\n        that.$canvas.mousedown(function (e) {\n          $(\"canvas\").css({\n            left: \"4000px\"\n          });\n          var BottomElement = document.elementFromPoint(e.clientX, e.clientY);\n          $(\"canvas\").css({\n            left: \"0px\"\n          });\n          $(BottomElement).click();\n          return false;\n        });\n        var circle_r = 0;\n        var shape_init_shift = 130;\n        that.shape = new Kinetic.Shape({\n          radius: circle_r,\n          center_x: -shape_init_shift,\n          center_y: -shape_init_shift,\n          width: 0,\n          height: 0,\n          sceneFunc: function (context) {\n            var ctx = this.getContext(\"2d\")._context;\n\n            var pos = this.pos;\n            var def_comp = ctx.globalCompositeOperation;\n            ctx.globalCompositeOperation = \"destination-out\";\n            ctx.beginPath();\n            var x = this.attrs.center_x - Math.round(this.attrs.width / 2);\n            var y = this.attrs.center_y - Math.round(this.attrs.height / 2);\n            ctx.roundRect(x, y, this.attrs.width, this.attrs.height, this.attrs.radius);\n            ctx.fill();\n            ctx.globalCompositeOperation = def_comp;\n          }\n        });\n        that.shape.radius = circle_r;\n        that.layer.add(that.rect);\n        that.layer.add(that.shape);\n        that.kinetic_stage.add(that.layer);\n        var doit;\n        $(window).on(\"resize\", function () {\n          clearTimeout(doit);\n          $('.enjoyhint_next_btn').css('visibility', 'hidden');\n          $('.enjoyhint_prev_btn').css('visibility', 'hidden');\n          $('.enjoyhint_skip_btn').css('visibility', 'hidden');\n          $('.enjoy_hint_label').remove();\n          $(\"#enjoyhint_arrpw_line\").remove();\n\n          if (!$(that.stepData.enjoyHintElementSelector).is(\":visible\")) {\n            that.stopFunction();\n            $(window).off(\"resize\");\n            return;\n          }\n\n          var boundingClientRect = $(that.stepData.enjoyHintElementSelector)[0].getBoundingClientRect();\n          that.shape.attrs.center_x = Math.round(boundingClientRect.left + boundingClientRect.width / 2);\n          that.shape.attrs.center_y = Math.round(boundingClientRect.top + boundingClientRect.height / 2);\n          that.shape.attrs.width = boundingClientRect.width + 11;\n          that.shape.attrs.height = boundingClientRect.height + 11;\n\n          function renderAfterResize() {\n            var newDataCoords = $(that.stepData.enjoyHintElementSelector).get(0).getBoundingClientRect();\n            that.stepData.center_x = newDataCoords.left + newDataCoords.width / 2;\n            that.stepData.center_y = newDataCoords.top + newDataCoords.height / 2;\n            that.stepData.width = newDataCoords.width + 11;\n            that.stepData.height = newDataCoords.height + 11;\n            that.renderLabelWithShape(that.stepData);\n            $('.enjoyhint_next_btn').css('visibility', 'visible');\n            $('.enjoyhint_prev_btn').css('visibility', 'visible');\n            $('.enjoyhint_skip_btn').css('visibility', 'visible');\n          }\n\n          doit = setTimeout(function () {\n            if (boundingClientRect.top < 0 || boundingClientRect.bottom > (window.innerHeight || document.documentElement.clientHeight)) {\n              $(document.body).scrollTo(that.stepData.enjoyHintElementSelector, 150, {\n                offset: -200,\n                onAfter: renderAfterResize\n              });\n            } else renderAfterResize();\n          }, 150);\n          var newWidth = window.innerWidth;\n          var newHeight = window.innerHeight;\n          var scaleX = newWidth / originalWidth;\n          var scaleY = newHeight / originalHeight;\n          that.kinetic_stage.setAttr(\"width\", originalWidth * scaleX);\n          that.kinetic_stage.setAttr(\"height\", originalHeight * scaleY);\n          that.rect = new Kinetic.Rect({\n            fill: options.fill,\n            width: window.innerWidth,\n            height: window.innerHeight\n          });\n          that.layer.removeChildren();\n          that.layer.add(that.rect);\n          that.layer.add(that.shape);\n          that.kinetic_stage.draw();\n        });\n        var enjoyhint_elements = [that.enjoyhint, $top_dis_events, $bottom_dis_events, $left_dis_events, $right_dis_events];\n\n        that.show = function () {\n          that.enjoyhint.removeClass(that.cl.hide);\n        };\n\n        that.hide = function () {\n          that.enjoyhint.addClass(that.cl.hide);\n          var tween = new Kinetic.Tween({\n            node: that.shape,\n            duration: 0.002,\n            center_x: -shape_init_shift,\n            center_y: -shape_init_shift\n          });\n          tween.play();\n        };\n\n        that.hide();\n\n        that.hideNextBtn = function () {\n          that.$next_btn.addClass(that.cl.hide);\n          that.nextBtn = \"hide\";\n        };\n\n        that.hidePrevBtn = function () {\n          that.$prev_btn.addClass(that.cl.hide);\n          that.prevBtn = \"hide\";\n        };\n\n        that.showPrevBtn = function () {\n          that.$prev_btn.removeClass(that.cl.hide);\n          that.prevBtn = \"show\";\n        };\n\n        that.showNextBtn = function () {\n          that.$next_btn.removeClass(that.cl.hide);\n          that.nextBtn = \"show\";\n        };\n\n        that.hideSkipBtn = function () {\n          that.$skip_btn.addClass(that.cl.hide);\n        };\n\n        that.showSkipBtn = function () {\n          that.$skip_btn.removeClass(that.cl.hide);\n        };\n\n        that.renderCircle = function (data) {\n          var r = data.r || 0;\n          var x = data.x || 0;\n          var y = data.y || 0;\n          var tween = new Kinetic.Tween({\n            node: that.shape,\n            duration: 0.2,\n            center_x: x,\n            center_y: y,\n            width: r * 2,\n            height: r * 2,\n            radius: r\n          });\n          tween.play();\n          var left = x - r;\n          var right = x + r;\n          var top = y - r;\n          var bottom = y + r;\n          var margin = 20;\n          return {\n            x: x,\n            y: y,\n            left: left,\n            right: right,\n            top: top,\n            bottom: bottom,\n            conn: {\n              left: {\n                x: left - margin,\n                y: y\n              },\n              right: {\n                x: right + margin,\n                y: y\n              },\n              top: {\n                x: x,\n                y: top - margin\n              },\n              bottom: {\n                x: x,\n                y: bottom + margin\n              }\n            }\n          };\n        };\n\n        that.renderRect = function (data, timeout) {\n          var r = data.r || 0;\n          var x = data.x || 0;\n          var y = data.y || 0;\n          var w = data.w || 0;\n          var h = data.h || 0;\n          var margin = 20;\n          var tween = new Kinetic.Tween({\n            node: that.shape,\n            duration: timeout,\n            center_x: x,\n            center_y: y,\n            width: w,\n            height: h,\n            radius: r\n          });\n          tween.play();\n          var half_w = Math.round(w / 2);\n          var half_h = Math.round(h / 2);\n          var left = x - half_w;\n          var right = x + half_w;\n          var top = y - half_h;\n          var bottom = y + half_h;\n          return {\n            x: x,\n            y: y,\n            left: left,\n            right: right,\n            top: top,\n            bottom: bottom,\n            conn: {\n              left: {\n                x: left - margin,\n                y: y\n              },\n              right: {\n                x: right + margin,\n                y: y\n              },\n              top: {\n                x: x,\n                y: top - margin\n              },\n              bottom: {\n                x: x,\n                y: bottom + margin\n              }\n            }\n          };\n        };\n\n        that.renderLabel = function (data) {\n          var x = data.x || 0;\n          that.originalElementX = x;\n          var y = data.y || 0;\n          var text = data.text || 0;\n          var label = that.getLabelElement({\n            x: x,\n            y: y,\n            text: data.text\n          });\n          var label_w = label.width();\n          var label_h = label.height();\n          var label_left = label.offset().left;\n          var label_right = label.offset().left + label_w;\n          var label_top = label.offset().top - $(document).scrollTop();\n          var label_bottom = label.offset().top - $(document).scrollTop() + label_h;\n          var margin = 10;\n          var conn_left = {\n            x: label_left - margin,\n            y: label_top + Math.round(label_h / 2)\n          };\n          var conn_right = {\n            x: label_right + margin,\n            y: label_top + Math.round(label_h / 2)\n          };\n          var conn_top = {\n            x: label_left + Math.round(label_w / 2),\n            y: label_top - margin\n          };\n          var conn_bottom = {\n            x: label_left + Math.round(label_w / 2),\n            y: label_bottom + margin\n          };\n          label.detach();\n          setTimeout(function () {\n            $(\"#enjoyhint_label\").remove();\n            label.appendTo(that.enjoyhint);\n          }, that.options.animation_time / 2);\n          return {\n            label: label,\n            left: label_left,\n            right: label_right,\n            top: label_top,\n            bottom: label_bottom,\n            conn: {\n              left: conn_left,\n              right: conn_right,\n              top: conn_top,\n              bottom: conn_bottom\n            }\n          };\n        };\n\n        that.setMarkerColor = function (color) {\n          function isValidColor(value) {\n            const temp = new Option().style;\n            temp.color = value;\n            return temp.color !== '';\n          }\n\n          if (isValidColor(color)) {\n            return [$(\"#poliline\"), $(\"#enjoyhint_arrpw_line\")].forEach(function (element) {\n              element.css(\"stroke\", color);\n            });\n          }\n\n          $(\"#poliline\").css(\"stroke\", \"rgb(255,255,255)\");\n          console.log(\"Error: invalid color name property - \" + color);\n        };\n\n        that.renderArrow = function (data) {\n          var x_from = data.x_from || 0;\n          var y_from = data.y_from || 0;\n          var x_to = data.x_to || 0;\n          var y_to = data.y_to || 0;\n          var by_top_side = data.by_top_side;\n          var control_point_x = 0;\n          var control_point_y = 0;\n\n          if (by_top_side === 'hor') {\n            control_point_x = x_to;\n            control_point_y = y_from;\n          } else {\n            control_point_x = x_from;\n            control_point_y = y_to;\n          }\n\n          that.enjoyhint.addClass(that.cl.svg_transparent);\n          setTimeout(function () {\n            $(\"#enjoyhint_arrpw_line\").remove();\n            var d = \"M\" + x_from + \",\" + y_from + \" Q\" + control_point_x + \",\" + control_point_y + \" \" + x_to + \",\" + y_to;\n            that.$svg.append(makeSVG(\"path\", {\n              style: \"fill:none; stroke:rgb(255,255,255); stroke-width:3\",\n              \"marker-end\": \"url(#arrowMarker)\",\n              d: d,\n              id: \"enjoyhint_arrpw_line\"\n            }));\n\n            if (that.stepData.arrowColor) {\n              that.setMarkerColor(that.stepData.arrowColor);\n            } else {\n              $(\"#poliline\").css(\"stroke\", \"rgb(255, 255, 255)\");\n            }\n\n            that.enjoyhint.removeClass(that.cl.svg_transparent);\n          }, that.options.animation_time / 2);\n        };\n\n        that.getLabelElement = function (data) {\n          return $(\"<div>\", {\n            class: \"enjoy_hint_label\",\n            id: \"enjoyhint_label\"\n          }).css({\n            top: data.y + \"px\",\n            left: data.x + \"px\"\n          }).html(data.text).appendTo(that.enjoyhint);\n        };\n\n        that.disableEventsNearRect = function (rect) {\n          $top_dis_events.css({\n            top: \"0\",\n            left: \"0\"\n          }).height(rect.top);\n          $bottom_dis_events.css({\n            top: rect.bottom + \"px\",\n            left: \"0\"\n          });\n          $left_dis_events.css({\n            top: \"0\",\n            left: 0 + \"px\"\n          }).width(rect.left);\n          $right_dis_events.css({\n            top: \"0\",\n            left: rect.right + \"px\"\n          });\n        };\n\n        (function ($) {\n          $.event.special.destroyed = {\n            remove: function (o) {\n              if (o.handler) {\n                o.handler();\n              }\n            }\n          };\n        })($);\n\n        that.renderLabelWithShape = function (data) {\n          that.stepData = data;\n\n          function findParentDialog(element) {\n            if (element.tagName === \"MD-DIALOG\") {\n              return element;\n            } else if (typeof element.tagName == \"undefined\") {\n              return null;\n            } else {\n              return findParentDialog($(element).parent()[0]);\n            }\n          }\n\n          var dialog = findParentDialog($(that.stepData.enjoyHintElementSelector)[0]);\n\n          if (dialog != null) {\n            $(dialog).on(\"dialogClosing\", function () {\n              that.stopFunction();\n              return;\n            });\n          }\n\n          that.resetComponentStuff();\n          var shape_type = data.shape || \"rect\";\n          var shape_data = {};\n          var half_w = 0;\n          var half_h = 0;\n          var shape_offsets = {\n            top: data.top || 0,\n            bottom: data.bottom || 0,\n            left: data.left || 0,\n            right: data.right || 0\n          };\n\n          switch (shape_type) {\n            case \"circle\":\n              half_w = half_h = data.radius;\n              var sides_pos = {\n                top: data.center_y - half_h + shape_offsets.top,\n                bottom: data.center_y + half_h - shape_offsets.bottom,\n                left: data.center_x - half_w + shape_offsets.left,\n                right: data.center_x + half_w - shape_offsets.right\n              };\n              var width = sides_pos.right - sides_pos.left;\n              var height = sides_pos.bottom - sides_pos.top;\n              data.radius = Math.round(Math.min(width, height) / 2); //new half habarites\n\n              half_w = half_h = Math.round(data.radius / 2);\n              var new_half_w = Math.round(width / 2);\n              var new_half_h = Math.round(height / 2); //new center_x and center_y\n\n              data.center_x = sides_pos.left + new_half_w;\n              data.center_y = sides_pos.top + new_half_h;\n              shape_data = that.renderCircle({\n                x: data.center_x,\n                y: data.center_y,\n                r: data.radius\n              });\n              break;\n\n            case \"rect\":\n              half_w = Math.round(data.width / 2);\n              half_h = Math.round(data.height / 2);\n              var sides_pos = {\n                top: data.center_y - half_h + shape_offsets.top,\n                bottom: data.center_y + half_h - shape_offsets.bottom,\n                left: data.center_x - half_w + shape_offsets.left,\n                right: data.center_x + half_w - shape_offsets.right\n              };\n              data.width = sides_pos.right - sides_pos.left;\n              data.height = sides_pos.bottom - sides_pos.top;\n              half_w = Math.round(data.width / 2);\n              half_h = Math.round(data.height / 2); //new center_x and center_y\n\n              data.center_x = sides_pos.left + half_w;\n              data.center_y = sides_pos.top + half_h;\n              shape_data = that.renderRect({\n                x: data.center_x,\n                y: data.center_y,\n                w: data.width,\n                h: data.height,\n                r: data.radius\n              }, 0.2);\n              break;\n          }\n\n          var body_size = {\n            w: that.enjoyhint.width(),\n            h: that.enjoyhint.height()\n          };\n          var label = that.getLabelElement({\n            x: 0,\n            y: 0,\n            text: data.text\n          });\n          var label_width = label.outerWidth();\n          var label_height = label.outerHeight();\n          label.remove();\n          var top_offset = data.center_y - half_h;\n          var bottom_offset = body_size.h - (data.center_y + half_h);\n          var left_offset = data.center_x - half_w;\n          var right_offset = body_size.w - (data.center_x + half_w);\n          var label_shift = window.innerHeight < 670 ? 130 : 150;\n          var label_margin = window.innerHeight < 670 ? 0 : 40;\n          var label_shift_with_label_height = label_shift + label_height + label_margin;\n          var label_ver_offset = half_h + label_shift;\n          var areas_for_label = [{\n            name: 'right_center',\n            common_area: right_offset * window.innerHeight,\n            width: right_offset,\n            height: window.innerHeight\n          }, {\n            name: 'right_top',\n            common_area: right_offset * top_offset,\n            width: right_offset,\n            height: top_offset\n          }, {\n            name: 'right_bottom',\n            common_area: right_offset * bottom_offset,\n            width: right_offset,\n            height: bottom_offset\n          }, {\n            name: 'left_center',\n            common_area: left_offset * window.innerHeight,\n            width: left_offset,\n            height: window.innerHeight\n          }, {\n            name: 'left_top',\n            common_area: left_offset * top_offset,\n            width: left_offset,\n            height: top_offset\n          }, {\n            name: 'left_bottom',\n            common_area: left_offset * bottom_offset,\n            width: left_offset,\n            height: bottom_offset\n          }, {\n            name: 'center_top',\n            common_area: window.innerWidth * top_offset,\n            width: window.innerWidth,\n            height: top_offset\n          }, {\n            name: 'center_bottom',\n            common_area: window.innerWidth * bottom_offset,\n            width: window.innerWidth,\n            height: bottom_offset\n          }];\n          var label_horizontal_space_required = label_width;\n          var label_vertical_space_required = window.innerHeight <= 670 ? label_shift_with_label_height : label_shift_with_label_height + 20;\n          var areas_priority = areas_for_label.sort(function (area1, area2) {\n            return area1.common_area - area2.common_area;\n          });\n          var label_hor_side = 'oversized';\n\n          for (var i = 0; i < areas_priority.length; i++) {\n            var name = areas_priority[i].name;\n            var area = areas_priority[i];\n\n            if (area.width > label_horizontal_space_required && area.height > label_vertical_space_required) {\n              label_hor_side = name;\n            }\n          }\n\n          var data_width_size = data.shape === \"circle\" ? data.radius * 2 : data.width ? data.width : data.radius * 2;\n          var data_height_size = data.shape === \"circle\" ? data.radius * 2 : data.height ? data.height : data.radius * 2;\n          var right_position = data.center_x + data_width_size / 2 + 80;\n          var left_position = data.center_x - label_width - data_width_size / 2 - 80;\n          var central_position = window.innerWidth / 2 - label_width / 2;\n          var top_position = data.center_y - label_ver_offset - label_height;\n          var bottom_position = data.center_y + label_ver_offset;\n          var central_ver_position = window.innerHeight / 2 - label_vertical_space_required / 2 + 20;\n          var label_x, label_y, x_to, y_to, x_from, y_from;\n          var by_top_side = \"hor\";\n\n          switch (label_hor_side) {\n            case \"center_top\":\n              label_y = top_position;\n              label_x = central_position;\n              x_to = data.center_x;\n              y_to = data.center_y - data_height_size / 2 - 20;\n              break;\n\n            case \"center_bottom\":\n              label_y = bottom_position;\n              label_x = central_position;\n              x_to = data.center_x;\n              y_to = data.center_y + data_height_size / 2 + 20;\n              break;\n\n            case 'left_center':\n              label_y = central_ver_position;\n              label_x = left_position;\n              x_to = data.center_x - data_width_size / 2 - 20;\n              y_to = data.center_y;\n              by_top_side = \"ver\";\n              break;\n\n            case 'left_top':\n              label_y = top_position;\n              label_x = left_position;\n              x_to = data.center_x - data_width_size / 2;\n              y_to = data.center_y - 20;\n              break;\n\n            case 'left_bottom':\n              label_y = bottom_position;\n              label_x = left_position;\n              x_to = data.center_x - data_width_size / 2;\n              y_to = data.center_y + 20;\n              by_top_side = \"ver\";\n              break;\n\n            case 'right_center':\n              label_y = central_ver_position;\n              label_x = right_position;\n              x_to = data.center_x + data_width_size / 2 + 20;\n              y_to = data.center_y;\n              by_top_side = \"ver\";\n              break;\n\n            case 'right_top':\n              label_y = top_position;\n              label_x = right_position;\n              x_to = data.center_x + data_width_size / 2;\n              y_to = data.center_y - 20;\n              break;\n\n            case 'right_bottom':\n              label_y = bottom_position;\n              label_x = right_position;\n              x_to = data.center_x + data_width_size / 2;\n              y_to = data.center_y + 20;\n              by_top_side = \"ver\";\n              break;\n\n            case 'oversized':\n              setTimeout(function () {\n                $(\"#enjoyhint_arrpw_line\").remove();\n                $('.enjoy_hint_label').css({\n                  'border-radius': '20px',\n                  '-webkit-border-radius': '20px',\n                  '-moz-border-radius': '20px',\n                  'background-color': '#272A26',\n                  '-webkit-transition': 'background-color ease-out 0.5s',\n                  '-moz-transition': 'background-color ease-out 0.5s',\n                  '-o-transition': 'background-color ease-out 0.5s',\n                  'transition': 'background-color ease-out 0.5s'\n                });\n              }, 450);\n              label_y = central_ver_position;\n              label_x = central_position;\n              break;\n          }\n\n          x_from = label_x + label_width / 2;\n          y_from = data.center_y > label_y + label_height / 2 ? label_y + label_height : label_y; // if data center out of window y scale\n\n          if (data.center_y < 0) {\n            y_to = 20;\n          } else if (data.center_y > window.innerHeight + 20) {\n            y_to = window.innerHeight - 20;\n          }\n\n          ; // if element at the same position as hint\n\n          if (data.center_y >= label_y && data.center_y <= label_y + label_height) {\n            x_from = data.center_x > label_x ? label_x + label_width : label_x;\n            y_from = data.center_y;\n          }\n\n          that.renderLabel({\n            x: label_x,\n            y: label_y,\n            text: data.text\n          });\n          setTimeout(function () {\n            var summoryButtonWidth = that.$next_btn.width() + that.$skip_btn.width() + that.$prev_btn.width() + 30;\n            var distance = label_x - 100;\n            var ver_button_position = label_y + label_height + 40;\n\n            if (summoryButtonWidth + label_x > x_to) {\n              distance = x_to >= x_from ? x_to + 20 : label_x + label_width / 2;\n            }\n\n            if (summoryButtonWidth + distance > window.innerWidth || distance < 0) {\n              distance = 10;\n              ver_button_position = y_from < y_to ? label_y - 80 : label_y + label_height + 40;\n            }\n\n            var initial_distance = distance;\n            var initial_ver_position = ver_button_position;\n\n            if (window.innerWidth <= 640) {\n              distance = 10;\n              ver_button_position = 10;\n              that.$next_btn.html('&#8250;');\n              that.$prev_btn.html('&#8249;');\n            } else {\n              distance = initial_distance;\n              ver_button_position = initial_ver_position;\n              that.$next_btn.html('Next');\n              that.$prev_btn.html('Previous');\n            }\n\n            that.$prev_btn.css({\n              left: distance,\n              top: ver_button_position\n            });\n            var left_next = distance + that.$prev_btn.width() + 10;\n            var left_skip = distance + that.$prev_btn.width() + that.$next_btn.width() + 20;\n\n            if (that.nextBtn === \"hide\") {\n              left_skip = distance + that.$prev_btn.width() + 10;\n            }\n\n            if (that.prevBtn === \"hide\") {\n              left_next = distance;\n              left_skip = distance + that.$next_btn.width() + 10;\n            }\n\n            that.$next_btn.css({\n              left: left_next,\n              top: ver_button_position\n            });\n            that.$skip_btn.css({\n              left: left_skip,\n              top: ver_button_position\n            });\n          }, 0);\n          that.$close_btn.css({\n            right: 10,\n            top: 10\n          });\n          that.disableEventsNearRect({\n            top: shape_data.top,\n            bottom: shape_data.bottom,\n            left: shape_data.left,\n            right: shape_data.right\n          });\n          that.renderArrow({\n            x_from: x_from,\n            y_from: y_from,\n            x_to: x_to,\n            y_to: y_to,\n            by_top_side: by_top_side\n          });\n        };\n\n        that.clear = function () {\n          that.ctx.clearRect(0, 0, 3000, 2000);\n        };\n\n        return this;\n      });\n    },\n    set: function (val) {\n      this.each(function () {\n        this.enjoyhint_obj.setValue(val);\n      });\n      return this;\n    },\n    show: function () {\n      this.each(function () {\n        this.enjoyhint_obj.show();\n      });\n      return this;\n    },\n    hide: function () {\n      this.each(function () {\n        this.enjoyhint_obj.hide();\n      });\n      return this;\n    },\n    hide_next: function () {\n      this.each(function () {\n        this.enjoyhint_obj.hideNextBtn();\n      });\n      return this;\n    },\n    hide_prev: function () {\n      this.each(function () {\n        this.enjoyhint_obj.hidePrevBtn();\n      });\n      return this;\n    },\n    show_prev: function () {\n      this.each(function () {\n        this.enjoyhint_obj.showPrevBtn();\n      });\n      return this;\n    },\n    show_next: function () {\n      this.each(function () {\n        this.enjoyhint_obj.showNextBtn();\n      });\n      return this;\n    },\n    hide_skip: function () {\n      this.each(function () {\n        this.enjoyhint_obj.hideSkipBtn();\n      });\n      return this;\n    },\n    show_skip: function () {\n      this.each(function () {\n        this.enjoyhint_obj.showSkipBtn();\n      });\n      return this;\n    },\n    render_circle: function (x, y, r) {\n      this.each(function () {\n        this.enjoyhint_obj.renderCircle(x, y, r);\n      });\n      return this;\n    },\n    render_label: function (x, y, r) {\n      this.each(function () {\n        this.enjoyhint_obj.renderLabel(x, y, r);\n      });\n      return this;\n    },\n    render_label_with_shape: function (data, stopFunction) {\n      this.each(function () {\n        that.stopFunction = stopFunction;\n        this.enjoyhint_obj.renderLabelWithShape(data);\n      });\n      return this;\n    },\n    redo_events_near_rect: function (rect) {\n      that.disableEventsNearRect({\n        top: rect.top,\n        bottom: rect.bottom,\n        left: rect.left,\n        right: rect.right\n      });\n    },\n    clear: function () {\n      this.each(function () {\n        this.enjoyhint_obj.clear();\n      });\n      return this;\n    },\n    close: function (val) {\n      this.each(function () {\n        this.enjoyhint_obj.closePopdown();\n      });\n      return this;\n    }\n  };\n\n  $.fn.enjoyhint = function (method) {\n    if (methods[method]) {\n      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n    } else if (typeof method === \"object\" || !method) {\n      return methods.init.apply(this, arguments);\n    } else {\n      $.error(\"Method \" + method + \" does not exist on $.numinput\");\n    }\n\n    return this;\n  };\n});","map":{"version":3,"sources":["/Users/AtokAdos/Desktop/CS_Projects/U4Ea/u4ea/node_modules/xbs-enjoyhint/enjoyhint.js"],"names":["factory","define","amd","require","exports","module","window","EnjoyHint","jQuery","$","configs","$event_element","that","_options","BTN_NEXT_TEXT","btnNextText","BTN_SKIP_TEXT","btnSkipText","SHAPE_BACKGROUND_COLOR","backgroundColor","body","defaults","onStart","onEnd","onSkip","onNext","options","extend","data","current_step","$body","init","remove","css","overflow","document","on","lockTouch","enjoyhint","onNextClick","nextStep","onPrevClick","prevStep","onSkipClick","skipAll","fill","e","preventDefault","destroyEnjoy","off","clear","$nextBtn","$skipBtn","removeClass","nextUserClass","text","skipUserClass","hideCurrentHint","stepAction","$enjoyhint","addClass","step_data","scrollSpeed","scrollAnimationSpeed","onBeforeStart","timeout","setTimeout","selector","prop","hasOwnProperty","split","event","event_type","description","isHintInViewport","get","getBoundingClientRect","top","bottom","innerHeight","documentElement","clientHeight","scrollTo","offset","$element","makeEventName","event_selector","keydown","which","keyCode","showNext","showPrev","showSkip","nextButton","className","skipButton","max_habarites","Math","max","outerWidth","outerHeight","radius","round","w","h","shape_margin","margin","undefined","coords","x","left","y","scrollTop","shape_data","enjoyHintElementSelector","center_x","center_y","arrowColor","right","scroll","console","log","shape","width","height","stop","name","is_custom","event_name","callback","addEventListener","reRunScript","cs","runScript","resumeScript","setCurrentStep","getCurrentStep","trigger","setScript","_data","Array","length","Error","set","setSteps","run","resume","CanvasRenderingContext2D","prototype","roundRect","r","beginPath","moveTo","arcTo","closePath","Kinetic","originalLabelLeft","originalLabelTop","originalArrowLeft","originalArrowTop","originalCenterX","originalCenterY","originalSkipbuttonLeft","originalSkipbuttonTop","prevWindowWidth","prevWindowHeight","originalWidth","innerWidth","originalHeight","methods","each","animation_time","enjoyhint_obj","resetComponentStuff","$that","gcl","chooser","cl","enjoy_hint","hide","disable_events_element","btn","skip_btn","close_btn","next_btn","previous_btn","main_canvas","main_svg","svg_wrapper","svg_transparent","kinetic_container","makeSVG","tag","attrs","el","createElementNS","k","setAttribute","canvas_size","canvas_id","class","appendTo","enjoyhint_svg_wrapper","$stage_container","$canvas","$svg","defs","marker","id","viewBox","refX","refY","markerUnits","orient","markerWidth","markerHeight","polilyne","style","d","append","kinetic_stage","Stage","container","scaleX","layer","Layer","rect","Rect","$top_dis_events","$bottom_dis_events","clone","$left_dis_events","$right_dis_events","stopPropagation","stopImmediatePropagation","focusout","click","$skip_btn","html","$next_btn","$close_btn","$prev_btn","mousedown","BottomElement","elementFromPoint","clientX","clientY","circle_r","shape_init_shift","Shape","sceneFunc","context","ctx","getContext","_context","pos","def_comp","globalCompositeOperation","add","doit","clearTimeout","stepData","is","stopFunction","boundingClientRect","renderAfterResize","newDataCoords","renderLabelWithShape","onAfter","newWidth","newHeight","scaleY","setAttr","removeChildren","draw","enjoyhint_elements","show","tween","Tween","node","duration","play","hideNextBtn","nextBtn","hidePrevBtn","prevBtn","showPrevBtn","showNextBtn","hideSkipBtn","showSkipBtn","renderCircle","conn","renderRect","half_w","half_h","renderLabel","originalElementX","label","getLabelElement","label_w","label_h","label_left","label_right","label_top","label_bottom","conn_left","conn_right","conn_top","conn_bottom","detach","setMarkerColor","color","isValidColor","value","temp","Option","forEach","element","renderArrow","x_from","y_from","x_to","y_to","by_top_side","control_point_x","control_point_y","disableEventsNearRect","special","destroyed","o","handler","findParentDialog","tagName","parent","dialog","shape_type","shape_offsets","sides_pos","min","new_half_w","new_half_h","body_size","label_width","label_height","top_offset","bottom_offset","left_offset","right_offset","label_shift","label_margin","label_shift_with_label_height","label_ver_offset","areas_for_label","common_area","label_horizontal_space_required","label_vertical_space_required","areas_priority","sort","area1","area2","label_hor_side","i","area","data_width_size","data_height_size","right_position","left_position","central_position","top_position","bottom_position","central_ver_position","label_x","label_y","summoryButtonWidth","distance","ver_button_position","initial_distance","initial_ver_position","left_next","left_skip","clearRect","val","setValue","hide_next","hide_prev","show_prev","show_next","hide_skip","show_skip","render_circle","render_label","render_label_with_shape","redo_events_near_rect","close","closePopdown","fn","method","apply","slice","call","arguments","error"],"mappings":"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","sourcesContent":["\"use strict\";\r\n(function(factory){\r\n  // AMD\r\n  if(typeof define === 'function' && define.amd) {\r\n    define(['jquery', './jquery.enjoyhint.js', 'jquery.scrollto'], factory);\r\n  }\r\n  // CommonJS\r\n  else if (typeof require === 'function' && typeof exports === 'object') {\r\n    module.exports = factory(require('jquery'), require('./jquery.enjoyhint.js'), require('jquery.scrollto'));\r\n  }\r\n  // Global\r\n  else {\r\n    window.EnjoyHint = factory(jQuery)\r\n  }\r\n})(function($){\r\n  var EnjoyHint = function(configs) {\r\n    var $event_element;\r\n    var that = this;\r\n    var _options = configs || {};\r\n    var BTN_NEXT_TEXT = _options.btnNextText;\r\n    var BTN_SKIP_TEXT = _options.btnSkipText;\r\n  \r\n    var SHAPE_BACKGROUND_COLOR = _options.backgroundColor || \"rgba(0,0,0,0.6)\";\r\n  \r\n    var body = \"body\"; // TODO: Is it possible case when we need to define enjoyhint somewhere else?\r\n  \r\n    var defaults = {\r\n      onStart: function() {},\r\n  \r\n      onEnd: function() {},\r\n  \r\n      onSkip: function() {},\r\n  \r\n      onNext: function() {}\r\n    };\r\n  \r\n    var options = $.extend(defaults, _options);\r\n    var data = [];\r\n    var current_step = 0;\r\n  \r\n    var $body = $(body);\r\n  \r\n    /********************* PRIVATE METHODS ***************************************/\r\n  \r\n    var init = function() {\r\n      if ($(\".enjoyhint\")) {\r\n        $(\".enjoyhint\").remove();\r\n      }\r\n  \r\n      $body.css({ overflow: \"hidden\" });\r\n  \r\n      $(document).on(\"touchmove\", lockTouch);\r\n  \r\n      $body.enjoyhint({\r\n        onNextClick: function() {\r\n          nextStep();\r\n        },\r\n        onPrevClick: function(){\r\n          prevStep();\r\n        },\r\n        onSkipClick: function() {\r\n          options.onSkip();\r\n          skipAll();\r\n        },\r\n        fill: SHAPE_BACKGROUND_COLOR\r\n      });\r\n    };\r\n  \r\n    var lockTouch = function(e) {\r\n      e.preventDefault();\r\n    };\r\n  \r\n    var destroyEnjoy = function() {\r\n      $(\".enjoyhint\").remove();\r\n      $body.css({ overflow: \"auto\" });\r\n      $(document).off(\"touchmove\", lockTouch);\r\n    };\r\n  \r\n    that.clear = function() {\r\n      var $nextBtn = $(\".enjoyhint_next_btn\");\r\n      var $skipBtn = $(\".enjoyhint_skip_btn\");\r\n  \r\n      $nextBtn.removeClass(that.nextUserClass);\r\n      $nextBtn.text(BTN_NEXT_TEXT);\r\n      $skipBtn.removeClass(that.skipUserClass);\r\n      $skipBtn.text(BTN_SKIP_TEXT);\r\n    };\r\n  \r\n    function hideCurrentHint(){\r\n      $body.enjoyhint(\"render_circle\", []);\r\n      $(\"#enjoyhint_label\").remove();\r\n      $(\"#enjoyhint_arrpw_line\").remove();\r\n      $body.enjoyhint(\"hide_prev\");\r\n      $body.enjoyhint(\"hide_next\");\r\n      $body.enjoyhint(\"hide_skip\");\r\n    };\r\n\r\n    var stepAction = function() {\r\n      if (!(data && data[current_step])) {\r\n        $body.enjoyhint(\"hide\");\r\n        options.onEnd();\r\n        destroyEnjoy();\r\n        return;\r\n      }\r\n      \r\n      options.onNext();\r\n  \r\n      var $enjoyhint = $(\".enjoyhint\");\r\n  \r\n      $enjoyhint.removeClass(\"enjoyhint-step-\" + current_step);\r\n      $enjoyhint.removeClass(\"enjoyhint-step-\" + (current_step + 1));\r\n      $enjoyhint.removeClass(\"enjoyhint-step-\" + (current_step + 2));\r\n      $enjoyhint.addClass(\"enjoyhint-step-\" + (current_step + 1));\r\n  \r\n      var step_data = data[current_step];\r\n\r\n      var scrollSpeed = step_data.scrollAnimationSpeed;\r\n  \r\n      if (\r\n        step_data.onBeforeStart &&\r\n        typeof step_data.onBeforeStart === \"function\"\r\n      ) {\r\n        step_data.onBeforeStart();\r\n      }\r\n  \r\n      var timeout = step_data.timeout || 0;\r\n  \r\n      setTimeout(function() {\r\n        if (!step_data.selector) {\r\n          for (var prop in step_data) {\r\n            if (step_data.hasOwnProperty(prop) && prop.split(\" \")[1]) {\r\n              step_data.selector = prop.split(\" \")[1];\r\n              step_data.event = prop.split(\" \")[0];\r\n  \r\n              if (\r\n                prop.split(\" \")[0] == \"next\" ||\r\n                prop.split(\" \")[0] == \"auto\" ||\r\n                prop.split(\" \")[0] == \"custom\"\r\n              ) {\r\n                step_data.event_type = prop.split(\" \")[0];\r\n              }\r\n  \r\n              step_data.description = step_data[prop];\r\n            }\r\n          }\r\n        }\r\n  \r\n        setTimeout(function() {\r\n          that.clear();\r\n        }, 250);\r\n\r\n        var isHintInViewport = $(step_data.selector).get(0).getBoundingClientRect();\r\n        if(isHintInViewport.top < 0 || isHintInViewport.bottom > (window.innerHeight || document.documentElement.clientHeight)){\r\n            hideCurrentHint();\r\n            $(document.body).scrollTo(step_data.selector, step_data.scrollAnimationSpeed || 250, {offset: -200});\r\n        }\r\n        else {\r\n          // if previous button has been clicked and element are in viewport to prevent custom step scrollAnimationSpeed set scrollSpeed to default\r\n          scrollSpeed = 250;\r\n        }\r\n  \r\n        setTimeout(function() {\r\n          var $element = $(step_data.selector);\r\n          var event = makeEventName(step_data.event);\r\n          $body.enjoyhint(\"show\");\r\n          $event_element = $element;\r\n  \r\n          if (step_data.event_selector) {\r\n            $event_element = $(step_data.event_selector);\r\n          }\r\n          \r\n          $event_element.off(event)\r\n          $element.off(\"keydown\");\r\n\r\n          if (!step_data.event_type && step_data.event == \"key\") {\r\n            $element.keydown(function(event) {\r\n              if (event.which == step_data.keyCode) {\r\n                current_step++;\r\n                stepAction();\r\n              }\r\n            });\r\n          }\r\n  \r\n          if (step_data.showNext !== true) {\r\n            $body.enjoyhint(\"hide_next\");\r\n          }\r\n          \r\n          $body.enjoyhint(\"hide_prev\");\r\n\r\n          if(current_step !== 0) {\r\n            $body.enjoyhint(\"show_prev\");\r\n          }\r\n\r\n          if (step_data.showPrev == false) {\r\n            $body.enjoyhint(\"hide_prev\");\r\n        }\r\n\r\n          if (step_data.showSkip == false) {\r\n            $body.enjoyhint(\"hide_skip\");\r\n          } else {\r\n            $body.enjoyhint(\"show_skip\");\r\n          }\r\n  \r\n  \r\n          if (step_data.nextButton) {\r\n            var $nextBtn = $(\".enjoyhint_next_btn\");\r\n  \r\n            $nextBtn.addClass(step_data.nextButton.className || \"\");\r\n            $nextBtn.text(step_data.nextButton.text || \"Next\");\r\n            that.nextUserClass = step_data.nextButton.className;\r\n          }\r\n  \r\n          if (step_data.skipButton) {\r\n            var $skipBtn = $(\".enjoyhint_skip_btn\");\r\n  \r\n            $skipBtn.addClass(step_data.skipButton.className || \"\");\r\n            $skipBtn.text(step_data.skipButton.text || \"Skip\");\r\n            that.skipUserClass = step_data.skipButton.className;\r\n          }\r\n  \r\n          if (step_data.event_type) {\r\n            switch (step_data.event_type) {\r\n              case \"auto\":\r\n                $element[step_data.event]();\r\n  \r\n                switch (step_data.event) {\r\n                  case \"click\":\r\n                    break;\r\n                }\r\n                current_step++;\r\n                stepAction();\r\n                return;\r\n  \r\n              case \"custom\":\r\n                on(step_data.event, function() {\r\n                  current_step++;\r\n                  off(step_data.event);\r\n                  stepAction();\r\n                });\r\n  \r\n                break;\r\n  \r\n              case \"next\":\r\n                $body.enjoyhint(\"show_next\");\r\n                break;\r\n            }\r\n          } else {\r\n            $event_element.on(event, function(e) {\r\n              if (step_data.keyCode && e.keyCode != step_data.keyCode) {\r\n                return;\r\n              }\r\n  \r\n              current_step++;\r\n              stepAction(); // clicked\r\n            });\r\n          }\r\n\r\n          var max_habarites = Math.max(\r\n            $element.outerWidth(),\r\n            $element.outerHeight()\r\n          );\r\n          var radius = step_data.radius || Math.round(max_habarites / 2) + 5;\r\n          var offset = $element.offset();\r\n          var w = $element.outerWidth();\r\n          var h = $element.outerHeight();\r\n          var shape_margin =\r\n            step_data.margin !== undefined ? step_data.margin : 10;\r\n  \r\n          var coords = {\r\n            x: offset.left + Math.round(w / 2),\r\n            y: offset.top + Math.round(h / 2) - $(document).scrollTop()\r\n          };\r\n  \r\n          var shape_data = {\r\n            enjoyHintElementSelector: step_data.selector,\r\n            center_x: coords.x,\r\n            center_y: coords.y,\r\n            text: step_data.description,\r\n            arrowColor: step_data.arrowColor,\r\n            top: step_data.top,\r\n            bottom: step_data.bottom,\r\n            left: step_data.left,\r\n            right: step_data.right,\r\n            margin: step_data.margin,\r\n            scroll: step_data.scroll\r\n          };\r\n  \r\n          if (shape_data.center_x === 0 && shape_data.center_y === 0) {\r\n            $body.enjoyhint(\"hide\");\r\n            destroyEnjoy();\r\n            return console.log(\"Error: Element position couldn't be reached\");\r\n          }\r\n  \r\n          if (step_data.shape && step_data.shape == \"circle\") {\r\n            shape_data.shape = \"circle\";\r\n            shape_data.radius = radius;\r\n          } else {\r\n            shape_data.radius = 0;\r\n            shape_data.width = w + shape_margin;\r\n            shape_data.height = h + shape_margin;\r\n          }\r\n  \r\n          $body.enjoyhint(\"render_label_with_shape\", shape_data, that.stop);\r\n          \r\n        }, scrollSpeed + 20 || 270);\r\n      }, timeout);\r\n    };\r\n  \r\n    var nextStep = function() {\r\n      current_step++;\r\n      stepAction();\r\n    };\r\n\r\n    var prevStep = function() {\r\n      current_step--;\r\n      stepAction();\r\n    };\r\n  \r\n    var skipAll = function() {\r\n      var step_data = data[current_step];\r\n      var $element = $(step_data.selector);\r\n  \r\n      off(step_data.event);\r\n      $element.off(makeEventName(step_data.event));\r\n  \r\n      destroyEnjoy();\r\n    };\r\n  \r\n    var makeEventName = function(name, is_custom) {\r\n      return name + (is_custom ? \"custom\" : \"\") + \".enjoy_hint\";\r\n    };\r\n  \r\n    var on = function(event_name, callback) {\r\n      $body.on(makeEventName(event_name, true), callback);\r\n    };\r\n  \r\n    var off = function(event_name) {\r\n      $body.off(makeEventName(event_name, true));\r\n    };\r\n  \r\n    /********************* PUBLIC METHODS ***************************************/\r\n  \r\n    window.addEventListener(\r\n      \"resize\",\r\n      function() {\r\n        if ($event_element != null) {\r\n          $body.enjoyhint(\r\n            \"redo_events_near_rect\",\r\n            $event_element[0].getBoundingClientRect()\r\n          );\r\n        }\r\n      },\r\n      false\r\n    );\r\n  \r\n    that.stop = function() {\r\n      skipAll();\r\n    };\r\n  \r\n    that.reRunScript = function(cs) {\r\n      current_step = cs;\r\n      stepAction();\r\n    };\r\n  \r\n    that.runScript = function() {\r\n      current_step = 0;\r\n      options.onStart();\r\n      stepAction();\r\n    };\r\n  \r\n    that.resumeScript = function() {\r\n      stepAction();\r\n    };\r\n  \r\n    that.setCurrentStep = function(cs) {\r\n      current_step = cs;\r\n    };\r\n  \r\n    that.getCurrentStep = function() {\r\n      return current_step;\r\n    };\r\n  \r\n    that.trigger = function(event_name) {\r\n      switch (event_name) {\r\n        case \"next\":\r\n          nextStep();\r\n          break;\r\n  \r\n        case \"skip\":\r\n          skipAll();\r\n          break;\r\n  \r\n        default: $body.trigger(makeEventName(event_name, true));\r\n      }\r\n    };\r\n  \r\n    that.setScript = function(_data) {\r\n      if (!(_data instanceof Array) && _data.length < 1) {\r\n        throw new Error(\"Configurations list isn't correct.\");\r\n      }\r\n  \r\n      data = _data;\r\n    };\r\n  \r\n    //support deprecated API methods\r\n    /**\r\n     * Configure data list\r\n     */\r\n    that.set = function(_data) {\r\n      that.setScript(_data);\r\n    };\r\n  \r\n    that.setSteps = function(_data) {\r\n      that.setScript(_data);\r\n    };\r\n  \r\n    that.run = function() {\r\n      that.runScript();\r\n    };\r\n  \r\n    that.resume = function() {\r\n      that.resumeScript();\r\n    };\r\n  \r\n    init();\r\n  };\r\n  return EnjoyHint;\r\n})\r\n\r\n\r\n;CanvasRenderingContext2D.prototype.roundRect = function(x, y, w, h, r) {\r\n  if (w < 2 * r) r = w / 2;\r\n  if (h < 2 * r) r = h / 2;\r\n  this.beginPath();\r\n  this.moveTo(x + r, y);\r\n  this.arcTo(x + w, y, x + w, y + h, r);\r\n  this.arcTo(x + w, y + h, x, y + h, r);\r\n  this.arcTo(x, y + h, x, y, r);\r\n  this.arcTo(x, y, x + w, y, r);\r\n  this.closePath();\r\n  return this;\r\n};\r\n\r\n(function(factory) {\r\n  'use strict';\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['jquery', 'kinetic'], factory);\r\n\t} else if (typeof module !== 'undefined' && module.exports) {\r\n\t\t// CommonJS\r\n\t\tmodule.exports = factory(require('jquery'), require('kinetic'));\r\n\t} else {\r\n\t\t// Global\r\n\t\tfactory(jQuery, Kinetic);\r\n\t}\r\n})(function($, Kinetic) {\r\n  var that;\r\n  var originalLabelLeft, originalLabelTop;\r\n  var originalArrowLeft, originalArrowTop;\r\n  var originalCenterX, originalCenterY;\r\n  var originalSkipbuttonLeft, originalSkipbuttonTop;\r\n  var prevWindowWidth, prevWindowHeight;\r\n  var originalWidth = window.innerWidth,\r\n    originalHeight = window.innerHeight;\r\n\r\n  var methods = {\r\n    init: function(options) {\r\n      return this.each(function() {\r\n        var defaults = {\r\n          onNextClick: function() {},\r\n          onSkipClick: function() {},\r\n          onPrevClick: function() {},\r\n\r\n          animation_time: 800\r\n        };\r\n\r\n        this.enjoyhint_obj = {};\r\n        that = this.enjoyhint_obj;\r\n\r\n        that.resetComponentStuff = function() {\r\n          originalLabelLeft = null;\r\n          originalLabelTop = null;\r\n          originalArrowLeft = null;\r\n          originalArrowTop = null;\r\n          originalCenterX = null;\r\n          originalCenterY = null;\r\n          originalSkipbuttonLeft = null;\r\n          originalSkipbuttonTop = null;\r\n          prevWindowWidth = null;\r\n          prevWindowHeight = null;\r\n          originalWidth = window.innerWidth;\r\n          originalHeight = window.innerHeight;\r\n        };\r\n\r\n        var $that = $(this);\r\n        that.options = $.extend(defaults, options);\r\n\r\n        //general classes\r\n        that.gcl = {\r\n          chooser: \"enjoyhint\"\r\n        };\r\n\r\n        // classes\r\n        that.cl = {\r\n          enjoy_hint: \"enjoyhint\",\r\n          hide: \"enjoyhint_hide\",\r\n          disable_events_element: \"enjoyhint_disable_events\",\r\n          btn: \"enjoyhint_btn\",\r\n          skip_btn: \"enjoyhint_skip_btn\",\r\n          close_btn: \"enjoyhint_close_btn\",\r\n          next_btn: \"enjoyhint_next_btn\",\r\n          previous_btn: \"enjoyhint_prev_btn\",\r\n          main_canvas: \"enjoyhint_canvas\",\r\n          main_svg: \"enjoyhint_svg\",\r\n          svg_wrapper: \"enjoyhint_svg_wrapper\",\r\n          svg_transparent: \"enjoyhint_svg_transparent\",\r\n          kinetic_container: \"kinetic_container\"\r\n        };\r\n\r\n        function makeSVG(tag, attrs) {\r\n          var el = document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\r\n\r\n          for (var k in attrs) {\r\n            el.setAttribute(k, attrs[k]);\r\n          }\r\n\r\n          return el;\r\n        }\r\n\r\n        // =======================================================================\r\n        // ========================---- enjoyhint ----==============================\r\n        // =======================================================================\r\n\r\n        that.canvas_size = {\r\n          w: $(window).width() * 1.4,\r\n          h: $(window).height() * 1.4\r\n        };\r\n\r\n        var canvas_id = \"enj_canvas\";\r\n\r\n        that.enjoyhint = $(\"<div>\", {\r\n          class: that.cl.enjoy_hint + \" \" + that.cl.svg_transparent\r\n        }).appendTo($that);\r\n        that.enjoyhint_svg_wrapper = $(\"<div>\", {\r\n          class: that.cl.svg_wrapper + \" \" + that.cl.svg_transparent\r\n        }).appendTo(that.enjoyhint);\r\n        that.$stage_container = $(\r\n          '<div id=\"' + that.cl.kinetic_container + '\">'\r\n        ).appendTo(that.enjoyhint);\r\n        that.$canvas = $(\r\n          '<canvas id=\"' +\r\n            canvas_id +\r\n            '\" width=\"' +\r\n            that.canvas_size.w +\r\n            '\" height=\"' +\r\n            that.canvas_size.h +\r\n            '\" class=\"' +\r\n            that.cl.main_canvas +\r\n            '\">'\r\n        ).appendTo(that.enjoyhint);\r\n        that.$svg = $(\r\n          '<svg width=\"' +\r\n            that.canvas_size.w +\r\n            '\" height=\"' +\r\n            that.canvas_size.h +\r\n            '\" class=\"' +\r\n            that.cl.main_canvas +\r\n            \" \" +\r\n            that.cl.main_svg +\r\n            '\">'\r\n        ).appendTo(that.enjoyhint_svg_wrapper);\r\n\r\n        var defs = $(makeSVG(\"defs\"));\r\n        var marker = $(\r\n          makeSVG(\"marker\", {\r\n            id: \"arrowMarker\",\r\n            viewBox: \"0 0 36 21\",\r\n            refX: \"21\",\r\n            refY: \"10\",\r\n            markerUnits: \"strokeWidth\",\r\n            orient: \"auto\",\r\n            markerWidth: \"16\",\r\n            markerHeight: \"12\"\r\n          })\r\n        );\r\n        var polilyne = $(\r\n          makeSVG(\"path\", {\r\n            style: \"fill:none; stroke:rgb(255,255,255); stroke-width:2\",\r\n            d: \"M0,0 c30,11 30,9 0,20\",\r\n            id: \"poliline\"\r\n          })\r\n        );\r\n\r\n        defs.append(marker.append(polilyne)).appendTo(that.$svg);\r\n\r\n        that.kinetic_stage = new Kinetic.Stage({\r\n          container: that.cl.kinetic_container,\r\n          width: that.canvas_size.w,\r\n          height: that.canvas_size.h,\r\n          scaleX: 1\r\n        });\r\n\r\n        that.layer = new Kinetic.Layer();\r\n\r\n        that.rect = new Kinetic.Rect({\r\n          fill: options.fill,\r\n          width: that.canvas_size.w,\r\n          height: that.canvas_size.h\r\n        });\r\n\r\n        var $top_dis_events = $(\"<div>\", {\r\n          class: that.cl.disable_events_element\r\n        }).appendTo(that.enjoyhint);\r\n        var $bottom_dis_events = $top_dis_events\r\n          .clone()\r\n          .appendTo(that.enjoyhint);\r\n        var $left_dis_events = $top_dis_events.clone().appendTo(that.enjoyhint);\r\n        var $right_dis_events = $top_dis_events\r\n          .clone()\r\n          .appendTo(that.enjoyhint);\r\n\r\n        var stopPropagation = function(e) {\r\n          e.stopImmediatePropagation();\r\n        };\r\n\r\n        $(\"button\").focusout(stopPropagation);\r\n        $top_dis_events.click(stopPropagation);\r\n        $bottom_dis_events.click(stopPropagation);\r\n        $left_dis_events.click(stopPropagation);\r\n        $right_dis_events.click(stopPropagation);\r\n\r\n        that.$skip_btn = $(\"<div>\", { class: that.cl.skip_btn })\r\n          .appendTo(that.enjoyhint)\r\n          .html(\"Skip\")\r\n          .click(function(e) {\r\n            that.hide();\r\n            that.options.onSkipClick();\r\n          });\r\n\r\n        that.$next_btn = $(\"<div>\", { class: that.cl.next_btn })\r\n          .appendTo(that.enjoyhint)\r\n          .html(\"Next\")\r\n          .click(function(e) {\r\n            that.options.onNextClick();\r\n          });\r\n\r\n        that.$close_btn = $(\"<div>\", { class: that.cl.close_btn })\r\n          .appendTo(that.enjoyhint)\r\n          .html(\"\")\r\n          .click(function(e) {\r\n            that.hide();\r\n            that.options.onSkipClick();\r\n          });\r\n\r\n        that.$prev_btn = $(\"<div>\", { class: that.cl.previous_btn })\r\n          .appendTo(that.enjoyhint)\r\n          .html(\"Previous\")\r\n          .click(function(e) {\r\n            that.options.onPrevClick();\r\n          });\r\n\r\n\r\n        that.$canvas.mousedown(function(e) {\r\n          $(\"canvas\").css({ left: \"4000px\" });\r\n\r\n          var BottomElement = document.elementFromPoint(e.clientX, e.clientY);\r\n          $(\"canvas\").css({ left: \"0px\" });\r\n\r\n          $(BottomElement).click();\r\n\r\n          return false;\r\n        });\r\n\r\n        var circle_r = 0;\r\n        var shape_init_shift = 130;\r\n\r\n        that.shape = new Kinetic.Shape({\r\n          radius: circle_r,\r\n          center_x: -shape_init_shift,\r\n          center_y: -shape_init_shift,\r\n          width: 0,\r\n          height: 0,\r\n          sceneFunc: function(context) {\r\n            var ctx = this.getContext(\"2d\")._context;\r\n            var pos = this.pos;\r\n            var def_comp = ctx.globalCompositeOperation;\r\n            ctx.globalCompositeOperation = \"destination-out\";\r\n            ctx.beginPath();\r\n\r\n            var x = this.attrs.center_x - Math.round(this.attrs.width / 2);\r\n            var y = this.attrs.center_y - Math.round(this.attrs.height / 2);\r\n            ctx.roundRect(\r\n              x,\r\n              y,\r\n              this.attrs.width,\r\n              this.attrs.height,\r\n              this.attrs.radius\r\n            );\r\n\r\n            ctx.fill();\r\n\r\n            ctx.globalCompositeOperation = def_comp;\r\n          }\r\n        });\r\n\r\n        that.shape.radius = circle_r;\r\n        that.layer.add(that.rect);\r\n        that.layer.add(that.shape);\r\n        that.kinetic_stage.add(that.layer);\r\n\r\n        var doit;\r\n\r\n        $(window).on(\"resize\", function() {\r\n          clearTimeout(doit);\r\n          $('.enjoyhint_next_btn').css('visibility', 'hidden');\r\n          $('.enjoyhint_prev_btn').css('visibility', 'hidden');\r\n          $('.enjoyhint_skip_btn').css('visibility', 'hidden');\r\n          $('.enjoy_hint_label').remove()\r\n          $(\"#enjoyhint_arrpw_line\").remove()\r\n          if (!$(that.stepData.enjoyHintElementSelector).is(\":visible\")) {\r\n            that.stopFunction();\r\n            $(window).off(\"resize\");\r\n            return;\r\n          }\r\n\r\n          var boundingClientRect = $(\r\n            that.stepData.enjoyHintElementSelector\r\n          )[0].getBoundingClientRect();\r\n          \r\n          that.shape.attrs.center_x = Math.round(\r\n            boundingClientRect.left + boundingClientRect.width / 2\r\n          );\r\n          that.shape.attrs.center_y = Math.round(\r\n            boundingClientRect.top + boundingClientRect.height / 2\r\n          );\r\n          that.shape.attrs.width = boundingClientRect.width + 11;\r\n          that.shape.attrs.height = boundingClientRect.height + 11;\r\n\r\n          function renderAfterResize(){\r\n            var newDataCoords = $(that.stepData.enjoyHintElementSelector).get(0).getBoundingClientRect();\r\n\r\n            that.stepData.center_x = newDataCoords.left + newDataCoords.width/2;\r\n            that.stepData.center_y = newDataCoords.top + newDataCoords.height/2;\r\n            that.stepData.width = newDataCoords.width + 11;\r\n            that.stepData.height = newDataCoords.height + 11;\r\n\r\n            that.renderLabelWithShape(that.stepData);\r\n            $('.enjoyhint_next_btn').css('visibility', 'visible');\r\n            $('.enjoyhint_prev_btn').css('visibility', 'visible');\r\n            $('.enjoyhint_skip_btn').css('visibility', 'visible');\r\n          }\r\n\r\n          doit = setTimeout(function() {\r\n            if(boundingClientRect.top < 0 || boundingClientRect.bottom > (window.innerHeight || document.documentElement.clientHeight)){\r\n              $(document.body).scrollTo(that.stepData.enjoyHintElementSelector, 150, {offset: -200, onAfter:renderAfterResize});\r\n            }\r\n            else renderAfterResize();\r\n          }, 150);\r\n\r\n\r\n          var newWidth = window.innerWidth;\r\n          var newHeight = window.innerHeight;\r\n          var scaleX = newWidth / originalWidth;\r\n          var scaleY = newHeight / originalHeight;\r\n\r\n          that.kinetic_stage.setAttr(\"width\", originalWidth * scaleX);\r\n          that.kinetic_stage.setAttr(\"height\", originalHeight * scaleY);\r\n\r\n          that.rect = new Kinetic.Rect({\r\n            fill: options.fill,\r\n            width: window.innerWidth,\r\n            height: window.innerHeight\r\n          });\r\n\r\n          that.layer.removeChildren();\r\n          that.layer.add(that.rect);\r\n          that.layer.add(that.shape);\r\n          that.kinetic_stage.draw();\r\n        });\r\n\r\n        var enjoyhint_elements = [\r\n          that.enjoyhint,\r\n          $top_dis_events,\r\n          $bottom_dis_events,\r\n          $left_dis_events,\r\n          $right_dis_events\r\n        ];\r\n\r\n        that.show = function() {\r\n          that.enjoyhint.removeClass(that.cl.hide);\r\n        };\r\n\r\n        that.hide = function() {\r\n          that.enjoyhint.addClass(that.cl.hide);\r\n\r\n          var tween = new Kinetic.Tween({\r\n            node: that.shape,\r\n            duration: 0.002,\r\n            center_x: -shape_init_shift,\r\n            center_y: -shape_init_shift\r\n          });\r\n\r\n          tween.play();\r\n        };\r\n\r\n        that.hide();\r\n\r\n        that.hideNextBtn = function() {\r\n          that.$next_btn.addClass(that.cl.hide);\r\n          that.nextBtn = \"hide\";\r\n        };\r\n\r\n        that.hidePrevBtn = function() {\r\n          that.$prev_btn.addClass(that.cl.hide);\r\n          that.prevBtn = \"hide\";\r\n        };\r\n\r\n        that.showPrevBtn = function() {\r\n          that.$prev_btn.removeClass(that.cl.hide);\r\n          that.prevBtn = \"show\";\r\n        };\r\n\r\n        that.showNextBtn = function() {\r\n          that.$next_btn.removeClass(that.cl.hide);\r\n          that.nextBtn = \"show\";\r\n        };\r\n\r\n        that.hideSkipBtn = function() {\r\n          that.$skip_btn.addClass(that.cl.hide);\r\n        };\r\n\r\n        that.showSkipBtn = function() {\r\n          that.$skip_btn.removeClass(that.cl.hide);\r\n        };\r\n\r\n        that.renderCircle = function(data) {\r\n          var r = data.r || 0;\r\n          var x = data.x || 0;\r\n          var y = data.y || 0;\r\n\r\n          var tween = new Kinetic.Tween({\r\n            node: that.shape,\r\n            duration: 0.2,\r\n            center_x: x,\r\n            center_y: y,\r\n            width: r * 2,\r\n            height: r * 2,\r\n            radius: r\r\n          });\r\n\r\n          tween.play();\r\n\r\n          var left = x - r;\r\n          var right = x + r;\r\n          var top = y - r;\r\n          var bottom = y + r;\r\n          var margin = 20;\r\n\r\n          return {\r\n            x: x,\r\n            y: y,\r\n            left: left,\r\n            right: right,\r\n            top: top,\r\n            bottom: bottom,\r\n            conn: {\r\n              left: {\r\n                x: left - margin,\r\n                y: y\r\n              },\r\n              right: {\r\n                x: right + margin,\r\n                y: y\r\n              },\r\n              top: {\r\n                x: x,\r\n                y: top - margin\r\n              },\r\n              bottom: {\r\n                x: x,\r\n                y: bottom + margin\r\n              }\r\n            }\r\n          };\r\n        };\r\n\r\n        that.renderRect = function(data, timeout) {\r\n          var r = data.r || 0;\r\n          var x = data.x || 0;\r\n          var y = data.y || 0;\r\n          var w = data.w || 0;\r\n          var h = data.h || 0;\r\n          var margin = 20;\r\n\r\n          var tween = new Kinetic.Tween({\r\n            node: that.shape,\r\n            duration: timeout,\r\n            center_x: x,\r\n            center_y: y,\r\n            width: w,\r\n            height: h,\r\n            radius: r\r\n          });\r\n\r\n          tween.play();\r\n\r\n          var half_w = Math.round(w / 2);\r\n          var half_h = Math.round(h / 2);\r\n          var left = x - half_w;\r\n          var right = x + half_w;\r\n          var top = y - half_h;\r\n          var bottom = y + half_h;\r\n\r\n          return {\r\n            x: x,\r\n            y: y,\r\n            left: left,\r\n            right: right,\r\n            top: top,\r\n            bottom: bottom,\r\n            conn: {\r\n              left: {\r\n                x: left - margin,\r\n                y: y\r\n              },\r\n              right: {\r\n                x: right + margin,\r\n                y: y\r\n              },\r\n              top: {\r\n                x: x,\r\n                y: top - margin\r\n              },\r\n              bottom: {\r\n                x: x,\r\n                y: bottom + margin\r\n              }\r\n            }\r\n          };\r\n        };\r\n\r\n        that.renderLabel = function(data) {\r\n          var x = data.x || 0;\r\n          that.originalElementX = x;\r\n          var y = data.y || 0;\r\n          var text = data.text || 0;\r\n\r\n          var label = that.getLabelElement({\r\n            x: x,\r\n            y: y,\r\n            text: data.text\r\n          });\r\n\r\n          var label_w = label.width();\r\n          var label_h = label.height();\r\n          var label_left = label.offset().left;\r\n          var label_right = label.offset().left + label_w;\r\n          var label_top = label.offset().top - $(document).scrollTop();\r\n          var label_bottom = label.offset().top - $(document).scrollTop() + label_h;\r\n\r\n          var margin = 10;\r\n\r\n          var conn_left = {\r\n            x: label_left - margin,\r\n            y: label_top + Math.round(label_h / 2)\r\n          };\r\n\r\n          var conn_right = {\r\n            x: label_right + margin,\r\n            y: label_top + Math.round(label_h / 2)\r\n          };\r\n\r\n          var conn_top = {\r\n            x: label_left + Math.round(label_w / 2),\r\n            y: label_top - margin\r\n          };\r\n\r\n          var conn_bottom = {\r\n            x: label_left + Math.round(label_w / 2),\r\n            y: label_bottom + margin\r\n          };\r\n\r\n          label.detach();\r\n\r\n          setTimeout(function() {\r\n            $(\"#enjoyhint_label\").remove();\r\n            label.appendTo(that.enjoyhint);\r\n          }, that.options.animation_time / 2);\r\n\r\n          return {\r\n            label: label,\r\n            left: label_left,\r\n            right: label_right,\r\n            top: label_top,\r\n            bottom: label_bottom,\r\n            conn: {\r\n              left: conn_left,\r\n              right: conn_right,\r\n              top: conn_top,\r\n              bottom: conn_bottom\r\n            }\r\n          };\r\n        };\r\n\r\n        that.setMarkerColor = function(color){\r\n\r\n            function isValidColor(value) {\r\n                const temp = new Option().style;\r\n                temp.color = value;\r\n                return temp.color !== '';\r\n            }\r\n\r\n            if (isValidColor(color)){\r\n                return [$(\"#poliline\"), $(\"#enjoyhint_arrpw_line\")].forEach(function(element){\r\n                    element.css(\"stroke\", color);\r\n                });\r\n            }\r\n\r\n            $(\"#poliline\").css(\"stroke\", \"rgb(255,255,255)\")\r\n            console.log(\"Error: invalid color name property - \" + color);\r\n        }\r\n\r\n        that.renderArrow = function(data) {\r\n          var x_from = data.x_from || 0;\r\n          var y_from = data.y_from || 0;\r\n          var x_to = data.x_to || 0;\r\n          var y_to = data.y_to || 0;\r\n          var by_top_side = data.by_top_side;\r\n          var control_point_x = 0;\r\n          var control_point_y = 0;\r\n  \r\n          if (by_top_side === 'hor') {\r\n            control_point_x = x_to\r\n            control_point_y = y_from\r\n          }\r\n          else {\r\n            control_point_x = x_from\r\n            control_point_y = y_to\r\n          }\r\n\r\n          that.enjoyhint.addClass(that.cl.svg_transparent);\r\n\r\n          setTimeout(function() {\r\n            $(\"#enjoyhint_arrpw_line\").remove();\r\n            \r\n            var d =\r\n              \"M\" +\r\n              x_from +\r\n              \",\" +\r\n              y_from +\r\n              \" Q\" +\r\n              control_point_x +\r\n              \",\" +\r\n              control_point_y +\r\n              \" \" +\r\n              x_to +\r\n              \",\" +\r\n              y_to;\r\n            that.$svg.append(\r\n              makeSVG(\"path\", {\r\n                style: \"fill:none; stroke:rgb(255,255,255); stroke-width:3\",\r\n                \"marker-end\": \"url(#arrowMarker)\",\r\n                d: d,\r\n                id: \"enjoyhint_arrpw_line\"\r\n              })\r\n            );\r\n\r\n            if(that.stepData.arrowColor) {\r\n                that.setMarkerColor(that.stepData.arrowColor)\r\n            } else {\r\n                $(\"#poliline\").css(\"stroke\", \"rgb(255, 255, 255)\");\r\n            }\r\n\r\n            that.enjoyhint.removeClass(that.cl.svg_transparent);\r\n          }, that.options.animation_time / 2);\r\n        };\r\n\r\n        that.getLabelElement = function(data) {\r\n          return $(\"<div>\", {\r\n            class: \"enjoy_hint_label\",\r\n            id: \"enjoyhint_label\"\r\n          })\r\n            .css({\r\n              top: data.y + \"px\",\r\n              left: data.x + \"px\"\r\n            })\r\n            .html(data.text)\r\n            .appendTo(that.enjoyhint);\r\n        };\r\n\r\n        that.disableEventsNearRect = function(rect) {\r\n          $top_dis_events\r\n            .css({\r\n              top: \"0\",\r\n              left: \"0\"\r\n            })\r\n            .height(rect.top);\r\n\r\n          $bottom_dis_events.css({\r\n            top: rect.bottom + \"px\",\r\n            left: \"0\"\r\n          });\r\n\r\n          $left_dis_events\r\n            .css({\r\n              top: \"0\",\r\n              left: 0 + \"px\"\r\n            })\r\n            .width(rect.left);\r\n\r\n          $right_dis_events.css({\r\n            top: \"0\",\r\n            left: rect.right + \"px\"\r\n          });\r\n        };\r\n\r\n        (function($) {\r\n          $.event.special.destroyed = {\r\n            remove: function(o) {\r\n              if (o.handler) {\r\n                o.handler();\r\n              }\r\n            }\r\n          };\r\n        })($);\r\n\r\n        that.renderLabelWithShape = function(data) {\r\n          that.stepData = data;\r\n\r\n          function findParentDialog(element) {\r\n            if (element.tagName === \"MD-DIALOG\") {\r\n              return element;\r\n            } else if (typeof element.tagName == \"undefined\") {\r\n              return null;\r\n            } else {\r\n              return findParentDialog($(element).parent()[0]);\r\n            }\r\n          }\r\n\r\n          var dialog = findParentDialog(\r\n            $(that.stepData.enjoyHintElementSelector)[0]\r\n          );\r\n\r\n          if (dialog != null) {\r\n            $(dialog).on(\"dialogClosing\", function() {\r\n              that.stopFunction();\r\n              return;\r\n            });\r\n          }\r\n\r\n          that.resetComponentStuff();\r\n\r\n          var shape_type = data.shape || \"rect\";\r\n          var shape_data = {};\r\n\r\n          var half_w = 0;\r\n          var half_h = 0;\r\n\r\n          var shape_offsets = {\r\n            top: data.top || 0,\r\n            bottom: data.bottom || 0,\r\n            left: data.left || 0,\r\n            right: data.right || 0\r\n          };\r\n\r\n          switch (shape_type) {\r\n            case \"circle\":\r\n              half_w = half_h = data.radius;\r\n\r\n              var sides_pos = {\r\n                top: data.center_y - half_h + shape_offsets.top,\r\n                bottom: data.center_y + half_h - shape_offsets.bottom,\r\n                left: data.center_x - half_w + shape_offsets.left,\r\n                right: data.center_x + half_w - shape_offsets.right\r\n              };\r\n\r\n              var width = sides_pos.right - sides_pos.left;\r\n              var height = sides_pos.bottom - sides_pos.top;\r\n              data.radius = Math.round(Math.min(width, height) / 2);\r\n\r\n              //new half habarites\r\n              half_w = half_h = Math.round(data.radius / 2);\r\n\r\n              var new_half_w = Math.round(width / 2);\r\n              var new_half_h = Math.round(height / 2);\r\n\r\n              //new center_x and center_y\r\n              data.center_x = sides_pos.left + new_half_w;\r\n              data.center_y = sides_pos.top + new_half_h;\r\n\r\n              shape_data = that.renderCircle({\r\n                x: data.center_x,\r\n                y: data.center_y,\r\n                r: data.radius\r\n              });\r\n\r\n              break;\r\n\r\n            case \"rect\":\r\n              half_w = Math.round(data.width / 2);\r\n              half_h = Math.round(data.height / 2);\r\n\r\n              var sides_pos = {\r\n                top: data.center_y - half_h + shape_offsets.top,\r\n                bottom: data.center_y + half_h - shape_offsets.bottom,\r\n                left: data.center_x - half_w + shape_offsets.left,\r\n                right: data.center_x + half_w - shape_offsets.right\r\n              };\r\n\r\n              data.width = sides_pos.right - sides_pos.left;\r\n              data.height = sides_pos.bottom - sides_pos.top;\r\n\r\n              half_w = Math.round(data.width / 2);\r\n              half_h = Math.round(data.height / 2);\r\n\r\n              //new center_x and center_y\r\n              data.center_x = sides_pos.left + half_w;\r\n              data.center_y = sides_pos.top + half_h;\r\n\r\n              shape_data = that.renderRect(\r\n                {\r\n                  x: data.center_x,\r\n                  y: data.center_y,\r\n                  w: data.width,\r\n                  h: data.height,\r\n                  r: data.radius\r\n                },\r\n                0.2\r\n              );\r\n\r\n              break;\r\n          }\r\n\r\n          var body_size = {\r\n            w: that.enjoyhint.width(),\r\n            h: that.enjoyhint.height()\r\n          };\r\n\r\n          var label = that.getLabelElement({\r\n            x: 0,\r\n            y: 0,\r\n            text: data.text\r\n          });\r\n\r\n          var label_width = label.outerWidth();\r\n          var label_height = label.outerHeight();\r\n          label.remove();\r\n          var top_offset = data.center_y - half_h;\r\n          var bottom_offset = body_size.h - (data.center_y + half_h);\r\n          var left_offset = data.center_x - half_w;\r\n          var right_offset = body_size.w - (data.center_x + half_w);\r\n\r\n          var label_shift = window.innerHeight < 670 ? 130 : 150;\r\n          var label_margin = window.innerHeight < 670 ? 0 : 40;\r\n          var label_shift_with_label_height =\r\n            label_shift + label_height + label_margin;\r\n          var label_ver_offset = half_h + label_shift;\r\n\r\n          var areas_for_label = [\r\n            {name: 'right_center', common_area: right_offset * window.innerHeight, width: right_offset, height: window.innerHeight},\r\n            {name: 'right_top', common_area: right_offset * top_offset, width: right_offset, height: top_offset},\r\n            {name: 'right_bottom', common_area: right_offset * bottom_offset, width: right_offset, height: bottom_offset},\r\n            {name: 'left_center', common_area: left_offset * window.innerHeight, width: left_offset, height: window.innerHeight},\r\n            {name: 'left_top', common_area: left_offset * top_offset, width: left_offset, height: top_offset},\r\n            {name: 'left_bottom', common_area: left_offset * bottom_offset, width: left_offset, height: bottom_offset},\r\n            {name: 'center_top', common_area: window.innerWidth * top_offset, width: window.innerWidth, height: top_offset},\r\n            {name: 'center_bottom', common_area: window.innerWidth * bottom_offset, width: window.innerWidth, height: bottom_offset},\r\n          ];\r\n          var label_horizontal_space_required = label_width;\r\n          var label_vertical_space_required = window.innerHeight <= 670 ? label_shift_with_label_height : label_shift_with_label_height + 20;\r\n\r\n          var areas_priority = areas_for_label\r\n            .sort(function(area1, area2){return area1.common_area - area2.common_area})\r\n\r\n          var label_hor_side = 'oversized';\r\n          for (var i = 0; i < areas_priority.length; i++) {\r\n              var name = areas_priority[i].name;\r\n              var area = areas_priority[i]\r\n              if (\r\n                area.width > label_horizontal_space_required\r\n                && area.height > label_vertical_space_required\r\n              ) {\r\n                  label_hor_side = name;\r\n              }\r\n          }\r\n\r\n          var data_width_size = data.shape === \"circle\" ? data.radius * 2 :\r\n            data.width ? data.width : data.radius * 2;\r\n\r\n          var data_height_size = data.shape === \"circle\" ? data.radius * 2 :\r\n            data.height ? data.height : data.radius * 2;\r\n\r\n          var right_position = data.center_x + data_width_size/2 + 80;\r\n          var left_position = data.center_x - label_width - data_width_size/2 - 80;\r\n          var central_position = window.innerWidth / 2 - label_width / 2;\r\n          var top_position = data.center_y - label_ver_offset - label_height;\r\n          var bottom_position = data.center_y + label_ver_offset;\r\n          var central_ver_position = window.innerHeight/2 - label_vertical_space_required/2 + 20;\r\n          \r\n          var label_x, label_y, x_to, y_to, x_from, y_from;\r\n          \r\n          var by_top_side = \"hor\"\r\n\r\n          switch(label_hor_side) {\r\n            case \"center_top\":\r\n                label_y = top_position;\r\n                label_x = central_position;\r\n                x_to = data.center_x;\r\n                y_to = data.center_y - data_height_size/2 - 20;\r\n                break;\r\n            case \"center_bottom\":\r\n                label_y = bottom_position;\r\n                label_x = central_position;\r\n                x_to = data.center_x;\r\n                y_to = data.center_y + data_height_size/2 + 20;\r\n                break;\r\n            case 'left_center':\r\n                label_y = central_ver_position;\r\n                label_x = left_position;\r\n                x_to = data.center_x - data_width_size/2 - 20;\r\n                y_to = data.center_y;\r\n                by_top_side = \"ver\";  \r\n                break;\r\n            case 'left_top':\r\n                label_y = top_position;\r\n                label_x = left_position;\r\n                x_to = data.center_x - data_width_size/2;\r\n                y_to = data.center_y - 20;\r\n                break;\r\n            case 'left_bottom':\r\n                label_y = bottom_position;\r\n                label_x = left_position;\r\n                x_to = data.center_x - data_width_size/2;\r\n                y_to = data.center_y + 20;\r\n                by_top_side = \"ver\";  \r\n                break;\r\n            case 'right_center':\r\n                label_y = central_ver_position;\r\n                label_x = right_position;\r\n                x_to = data.center_x + data_width_size/2 + 20;\r\n                y_to = data.center_y;\r\n                by_top_side = \"ver\";  \r\n                break;\r\n            case 'right_top':\r\n                label_y = top_position;\r\n                label_x = right_position;\r\n                x_to = data.center_x + data_width_size/2;\r\n                y_to = data.center_y - 20;\r\n                break;            \r\n            case 'right_bottom':\r\n                label_y = bottom_position;\r\n                label_x = right_position;\r\n                x_to = data.center_x + data_width_size/2;\r\n                y_to = data.center_y + 20;\r\n                by_top_side = \"ver\";  \r\n                break;\r\n            case 'oversized':\r\n              setTimeout(function(){\r\n                $(\"#enjoyhint_arrpw_line\").remove();\r\n                $('.enjoy_hint_label').css({\r\n                  'border-radius': '20px',\r\n                  '-webkit-border-radius': '20px',\r\n                  '-moz-border-radius': '20px',\r\n                  'background-color': '#272A26',\r\n                  '-webkit-transition': 'background-color ease-out 0.5s',\r\n                  '-moz-transition': 'background-color ease-out 0.5s',\r\n                  '-o-transition': 'background-color ease-out 0.5s',\r\n                  'transition': 'background-color ease-out 0.5s'\r\n                })\r\n              }, 450)\r\n                label_y = central_ver_position\r\n                label_x = central_position;\r\n                break;\r\n          }\r\n\r\n          x_from = label_x + label_width/2;\r\n          y_from = (data.center_y > label_y + label_height/2) ? label_y + label_height : label_y;\r\n          // if data center out of window y scale\r\n          if(data.center_y < 0) {\r\n            y_to = 20\r\n          }\r\n          else if ( data.center_y > window.innerHeight + 20 ) {\r\n            y_to = window.innerHeight - 20\r\n          };\r\n\r\n          // if element at the same position as hint\r\n          if(data.center_y >= label_y && data.center_y <= label_y + label_height) {\r\n            x_from = data.center_x > label_x ? label_x + label_width : label_x;\r\n            y_from = data.center_y;\r\n          }\r\n\r\n          that.renderLabel({\r\n            x: label_x,\r\n            y: label_y,\r\n            text: data.text\r\n          });\r\n\r\n          setTimeout(function(){\r\n            var summoryButtonWidth = that.$next_btn.width() + that.$skip_btn.width() + that.$prev_btn.width() + 30;\r\n            var distance = label_x - 100;\r\n            var ver_button_position = label_y + label_height + 40\r\n            \r\n            if (summoryButtonWidth + label_x > x_to) {\r\n            distance = x_to >= x_from ? x_to + 20 : label_x + label_width/2\r\n            }\r\n              \r\n            if (summoryButtonWidth + distance > window.innerWidth || distance < 0) {\r\n              distance = 10;\r\n              ver_button_position = y_from < y_to ? label_y - 80 : label_y + label_height + 40\r\n            }\r\n\r\n            var initial_distance = distance;\r\n            var initial_ver_position = ver_button_position;\r\n\r\n            if (window.innerWidth <= 640) {\r\n              distance = 10;\r\n              ver_button_position = 10;\r\n              that.$next_btn.html('&#8250;');\r\n              that.$prev_btn.html('&#8249;');\r\n            }\r\n            else {\r\n              distance = initial_distance;\r\n              ver_button_position = initial_ver_position;\r\n              that.$next_btn.html('Next');\r\n              that.$prev_btn.html('Previous');\r\n            }\r\n\r\n            that.$prev_btn.css({\r\n              left: distance,\r\n              top: ver_button_position\r\n            });\r\n\r\n            var left_next = distance + that.$prev_btn.width() + 10;\r\n            var left_skip = distance + that.$prev_btn.width() + that.$next_btn.width() + 20;\r\n\r\n            if (that.nextBtn === \"hide\") {\r\n              left_skip = distance + that.$prev_btn.width() + 10;\r\n            }\r\n\r\n            if(that.prevBtn === \"hide\") {\r\n              left_next = distance;\r\n              left_skip = distance + that.$next_btn.width() + 10;\r\n            }\r\n\r\n            that.$next_btn.css({\r\n              left: left_next,\r\n              top: ver_button_position\r\n            })\r\n\r\n            that.$skip_btn.css({\r\n              left: left_skip,\r\n              top: ver_button_position\r\n            });\r\n          }, 0)\r\n\r\n          that.$close_btn.css({\r\n            right: 10,\r\n            top: 10\r\n          });\r\n\r\n          that.disableEventsNearRect({\r\n            top: shape_data.top,\r\n            bottom: shape_data.bottom,\r\n            left: shape_data.left,\r\n            right: shape_data.right\r\n          });\r\n\r\n          that.renderArrow({\r\n            x_from: x_from,\r\n            y_from: y_from,\r\n            x_to: x_to,\r\n            y_to: y_to,\r\n            by_top_side: by_top_side,\r\n          });\r\n        };\r\n\r\n        that.clear = function() {\r\n          that.ctx.clearRect(0, 0, 3000, 2000);\r\n        };\r\n\r\n        return this;\r\n      });\r\n    },\r\n\r\n    set: function(val) {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.setValue(val);\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    show: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.show();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    hide: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.hide();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    hide_next: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.hideNextBtn();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    hide_prev: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.hidePrevBtn();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    show_prev: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.showPrevBtn();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    show_next: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.showNextBtn();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    hide_skip: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.hideSkipBtn();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    show_skip: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.showSkipBtn();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    render_circle: function(x, y, r) {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.renderCircle(x, y, r);\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    render_label: function(x, y, r) {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.renderLabel(x, y, r);\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    render_label_with_shape: function(data, stopFunction) {\r\n      this.each(function() {\r\n        that.stopFunction = stopFunction;\r\n        this.enjoyhint_obj.renderLabelWithShape(data);\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    redo_events_near_rect: function(rect) {\r\n      that.disableEventsNearRect({\r\n        top: rect.top,\r\n        bottom: rect.bottom,\r\n        left: rect.left,\r\n        right: rect.right\r\n      });\r\n    },\r\n\r\n    clear: function() {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.clear();\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    close: function(val) {\r\n      this.each(function() {\r\n        this.enjoyhint_obj.closePopdown();\r\n      });\r\n\r\n      return this;\r\n    }\r\n  };\r\n\r\n  $.fn.enjoyhint = function(method) {\r\n    if (methods[method]) {\r\n      return methods[method].apply(\r\n        this,\r\n        Array.prototype.slice.call(arguments, 1)\r\n      );\r\n    } else if (typeof method === \"object\" || !method) {\r\n      return methods.init.apply(this, arguments);\r\n    } else {\r\n      $.error(\"Method \" + method + \" does not exist on $.numinput\");\r\n    }\r\n\r\n    return this;\r\n  };\r\n});\r\n"]},"metadata":{},"sourceType":"script"}